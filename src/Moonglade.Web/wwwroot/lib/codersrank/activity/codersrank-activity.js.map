{"version":3,"file":"codersrank-activity.js.map","sources":["../src/shared/fetch-data.js","../src/shared/codersrank-logo.js","../src/shared/render-chart.js","../src/shared/render-error.js","../src/shared/render-loading.js","../src/shared/icons.js","../src/codersrank-activity.js"],"sourcesContent":["const cache = {};\n\nexport const fetchData = (username, id) => {\n  if (username && cache[username]) return Promise.resolve(cache[username]);\n  if (id && cache[id]) return Promise.resolve(cache[id]);\n\n  let endpoint = `https://api.codersrank.io/v2/users/${username || id}/activities`;\n  if (id) endpoint += '?get_by=id';\n\n  return fetch(endpoint, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      if (id) {\n        cache[id] = data;\n      } else {\n        cache[username] = data;\n      }\n      return data;\n    })\n    .catch((err) => {\n      // eslint-disable-next-line\n      return Promise.reject(err);\n    });\n};\n","export const codersrRankLogo = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"258\" height=\"39\" viewBox=\"0 0 258 39\"><path fill=\"#19223C\" d=\"M71.358 27.687A8.076 8.076 0 0 1 69 21.999c0-2.122.846-4.162 2.358-5.687a8.022 8.022 0 0 1 2.664-1.688 8.175 8.175 0 0 1 3.126-.543 8.298 8.298 0 0 1 4.723 1.339 7.155 7.155 0 0 1 2.895 3.791H80.12a3 3 0 0 0-1.182-1.283 3.106 3.106 0 0 0-1.713-.427 4.128 4.128 0 0 0-1.694.264 4.046 4.046 0 0 0-1.43.926 5.197 5.197 0 0 0-1.133 3.234c0 1.17.399 2.309 1.134 3.234.403.405.89.72 1.43.926a4.128 4.128 0 0 0 1.693.264c.586.039 1.17-.087 1.684-.364a3.01 3.01 0 0 0 1.211-1.198h4.571a7.156 7.156 0 0 1-2.895 3.792 8.298 8.298 0 0 1-4.723 1.338 8.173 8.173 0 0 1-3.085-.557 8.02 8.02 0 0 1-2.629-1.673zM88.652 27.687a8.076 8.076 0 0 1-2.359-5.688c0-2.122.846-4.162 2.359-5.687a8.57 8.57 0 0 1 5.79-2.238c2.15 0 4.221.8 5.79 2.238a8.076 8.076 0 0 1 2.358 5.687 8.076 8.076 0 0 1-2.359 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 98.623 22c0-1.17-.4-2.308-1.134-3.234a4.398 4.398 0 0 0-3.048-1.219c-1.14 0-2.234.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.048-1.219zM110.592 14.304a9.126 9.126 0 0 1 6.247 2.156 7.73 7.73 0 0 1 1.8 2.546 7.573 7.573 0 0 1 0 6.06 7.73 7.73 0 0 1-1.8 2.546 9.049 9.049 0 0 1-6.247 2.156h-5.561V14.304h5.561zm-1.752 12.64h1.752a4.596 4.596 0 0 0 1.903-.295 4.504 4.504 0 0 0 1.602-1.044 4.909 4.909 0 0 0 1.295-3.569 4.909 4.909 0 0 0-1.295-3.568 4.504 4.504 0 0 0-1.602-1.044 4.595 4.595 0 0 0-1.903-.294h-1.752v9.813zM131.313 14.23v2.9h-5.714v3.345h5.104v2.9H125.6v3.568h5.714v2.9h-9.599V14.23zM138.55 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32h-4.418l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM155.158 17.055a1.86 1.86 0 0 0-1.22.372c-.159.138-.284.311-.363.505-.08.193-.111.402-.093.61a1.528 1.528 0 0 0 .457 1.115c.32.31.712.539 1.143.67l1.523.445 1.676.52 1.524.744c.487.317.881.753 1.143 1.264.31.6.466 1.262.457 1.933a4.227 4.227 0 0 1-.45 1.859 4.333 4.333 0 0 1-1.226 1.487 6.424 6.424 0 0 1-4.343 1.412 6.899 6.899 0 0 1-4.342-1.263 4.331 4.331 0 0 1-1.278-1.588 4.223 4.223 0 0 1-.398-1.981h4.114c-.012.253.032.507.128.742.097.236.244.449.431.625a1.87 1.87 0 0 0 1.421.492c.475.02.94-.14 1.296-.447a1.382 1.382 0 0 0 .457-1.115 1.455 1.455 0 0 0-.457-1.115 2.986 2.986 0 0 0-1.143-.669l-1.524-.446-1.676-.52-1.523-.744a3.148 3.148 0 0 1-1.143-1.264 4 4 0 0 1-.305-1.859 4.15 4.15 0 0 1 .407-1.944 4.258 4.258 0 0 1 1.27-1.55 6.582 6.582 0 0 1 4.19-1.338 6.982 6.982 0 0 1 4.113 1.115 4.33 4.33 0 0 1 1.278 1.588c.292.62.428 1.299.398 1.98h-4.19a2.056 2.056 0 0 0-.533-1.263 1.611 1.611 0 0 0-1.22-.372zM168.261 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32H172.3l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM189.592 29.768l-.914-2.602h-5.714l-.914 2.602h-4.114l5.485-15.538h4.723l5.485 15.538h-4.037zm-5.638-5.501h3.733l-1.828-5.428-1.905 5.428zM205.972 14.23h3.885v15.538h-3.885l-6.476-9.813v9.813h-3.885V14.23h3.885l6.476 9.814zM217.093 29.768h-3.885V14.304h3.885v6.766l5.257-6.766h5.104l-6.552 7.732 6.552 7.732h-4.952l-5.333-6.84zM232.863 27.761a1.98 1.98 0 0 1-.5 1.253 2.07 2.07 0 0 1-1.197.664 2.1 2.1 0 0 1-1.359-.222 2.024 2.024 0 0 1-.91-1.01 1.962 1.962 0 0 1-.054-1.342c.141-.44.433-.82.827-1.076a2.096 2.096 0 0 1 2.583.246c.201.194.359.426.464.682.105.256.154.53.146.805z\"></path> <path fill=\"#67a4ac\" d=\"M235.301 29.768V14.304h3.885v15.464zM244.062 27.687a8.076 8.076 0 0 1-2.358-5.688c0-2.122.846-4.162 2.358-5.687a8.57 8.57 0 0 1 5.79-2.238c2.151 0 4.222.8 5.79 2.238A8.076 8.076 0 0 1 258 21.999a8.076 8.076 0 0 1-2.358 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 254.033 22c0-1.17-.399-2.308-1.134-3.234a4.398 4.398 0 0 0-3.047-1.219c-1.14 0-2.235.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.047-1.219z\"></path> <path d=\"M33.25.054L2.147 19.634C.682 20.52-.034 21.512.001 22.611v2.98c.035 1.1.768 2.075 2.2 2.926l15.393 8.885a.726.726 0 0 0 1.047-.373l3.456-8.352-7.33-4.15a1.317 1.317 0 0 1-.514-.477 1.346 1.346 0 0 1 .461-1.864l13.457-8.247L33.72.427a.324.324 0 0 0-.103-.36.31.31 0 0 0-.369-.013z\" fill=\"#19223c\"></path> <path d=\"M58.8 10.961L43.618 1.757a.726.726 0 0 0-1.047.32l-3.56 8.352 7.225 4.31c.208.113.381.282.502.488a1.347 1.347 0 0 1 0 1.363 1.318 1.318 0 0 1-.502.49l-13.561 7.98-5.76 13.407a.323.323 0 0 0 .026.452.312.312 0 0 0 .445-.026l9.949-6.012 3.927 5.64a.947.947 0 0 0 .785.425h9.425a.932.932 0 0 0 .832-.506.97.97 0 0 0-.047-.984l-6.388-9.79 12.933-7.82c1.466-.887 2.199-1.88 2.199-2.98V13.94c0-1.1-.733-2.092-2.2-2.979z\" fill=\"#67a4ac\"></path></svg>`;\n","import { codersrRankLogo } from './codersrank-logo';\n\nexport const renderChart = ({\n  data,\n  weeks,\n  svgWidth,\n  legend,\n  labels,\n  preloader,\n  step,\n  branding,\n} = {}) => {\n  const width = svgWidth;\n  const spacing = 4;\n  const wdays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n  const xOffset = labels ? 25 : 0;\n  const yOffset = labels ? 18 : 0;\n\n  const weeksArray = [];\n  for (let i = 0; i < weeks; i += 1) weeksArray.push(i);\n\n  const daysArray = [];\n  for (let i = 0; i < 7; i += 1) daysArray.push(i);\n\n  const rectSize = (width - xOffset - (weeks - 1) * spacing) / weeks;\n  const chartWidth = width + 5;\n  const chartHeight = yOffset + rectSize * 7 + spacing * 6 + 7;\n\n  const totalDays = (() => {\n    let numberOfDays = weeks * 7;\n    const todayWeekDay = new Date().getDay();\n    numberOfDays -= 7 - todayWeekDay;\n    return numberOfDays;\n  })();\n\n  const monthsColumns = (() => {\n    const cols = [];\n\n    const startDateTime = new Date().getTime() - totalDays * 24 * 60 * 60 * 1000;\n    let month;\n    for (let i = 0; i < weeks; i += 1) {\n      const weekStartMonth = new Date(\n        startDateTime + i * 7 * 24 * 60 * 60 * 1000,\n      ).getMonth();\n      if (month !== weekStartMonth) {\n        cols.push({\n          weekIndex: i,\n          month: weekStartMonth,\n        });\n        month = weekStartMonth;\n      }\n    }\n    return cols;\n  })();\n\n  const dayDate = (weekIndex, dayIndex) => {\n    const minusDays = totalDays - (weekIndex * 7 + dayIndex + 1);\n    const date = new Date(new Date().getTime() - minusDays * 24 * 60 * 60 * 1000);\n    const zerofy = (num) => {\n      if (num < 10) return `0${num}`;\n      return num;\n    };\n    return `${date.getFullYear()}-${zerofy(date.getMonth() + 1)}-${zerofy(\n      date.getDate(),\n    )}`;\n  };\n\n  const isDayDisabled = (weekIndex, dayIndex) => {\n    const dayNumber = weekIndex * 7 + dayIndex + 1;\n    return dayNumber > totalDays;\n  };\n\n  const activitiesInDay = (date) => {\n    let activities = 0;\n    if (!data || !date) return activities;\n    const dayData = data[date];\n    if (dayData) {\n      Object.keys(dayData).forEach((key) => {\n        // @ts-ignore\n        activities += dayData[key];\n      });\n    }\n    return activities;\n  };\n\n  const dayClasses = (weekIndex, dayIndex) => {\n    const classes = ['codersrank-activity-day'];\n    const date = dayDate(weekIndex, dayIndex);\n    const activities = activitiesInDay(date);\n    const level = activities > 0 ? Math.min(Math.floor(activities / step), 3) + 1 : 0;\n    if (level) {\n      classes.push(`codersrank-activity-day-${level}`);\n    }\n    if (isDayDisabled(weekIndex, dayIndex)) {\n      classes.push('codersrank-activity-day-disabled');\n    }\n    return classes.join(' ');\n  };\n\n  // prettier-ignore\n  return /* html */ `\n    <div class=\"codersrank-activity\">\n      <div class=\"codersrank-activity-chart\">\n        <svg viewBox=\"0 0 ${chartWidth} ${chartHeight}\" height=\"${chartHeight}\">\n          <g transform=\"translate(${xOffset}, ${yOffset})\">\n            ${weeksArray.map((w) => /* html */`\n            <g transform=\"translate(${(rectSize + spacing) * w}, 0)\">\n              ${daysArray.map((d) => /* html */`\n              <rect\n                width=\"${rectSize}\"\n                height=\"${rectSize}\"\n                rx=\"1.5\"\n                x=\"0\"\n                y=\"${(rectSize + spacing) * (d)}\"\n                data-date=\"${dayDate(w, d)}\"\n                class=\"${dayClasses(w, d)}\"\n              />\n              `).join('')}\n            </g>\n            `).join('')}\n          </g>\n\n          ${labels ? /* html */`\n          <g>\n            ${wdays.map((wday, index) => /* html */`\n            <text\n              class=\"codersrank-activity-wday\"\n              text-anchor=\"start\"\n              dominant-baseline=\"hanging\"\n              dx=\"0\"\n              dy=\"${(rectSize + spacing) * index + 2.5 + yOffset}\"\n            >\n              ${wday}\n            </text>\n            `).join('')}\n          </g>\n\n          <g>\n            ${monthsColumns.map((monthData) => /* html */`\n            <text\n              class=\"codersrank-activity-month\"\n              text-anchor=\"start\"\n              dominant-baseline=\"text-before-edge\"\n              dx=\"${(rectSize + spacing) * monthData.weekIndex + xOffset}\"\n              dy=\"0\"\n            >\n              ${months[monthData.month]}\n            </text>\n            `).join('')}\n          </g>\n          ` : ''}\n        </svg>\n        ${preloader ? /* html */`\n        <div class=\"codersrank-activity-preloader\"></div>\n        ` : ''}\n      </div>\n      ${legend ? /* html */`\n      <div class=\"codersrank-activity-legend\">\n        <span class=\"codersrank-activity-legend-label\">Less</span>\n        <span class=\"codersrank-activity-legend-item\"></span>\n        <span class=\"codersrank-activity-legend-item codersrank-activity-legend-item-1\"></span>\n        <span class=\"codersrank-activity-legend-item codersrank-activity-legend-item-2\"></span>\n        <span class=\"codersrank-activity-legend-item codersrank-activity-legend-item-3\"></span>\n        <span class=\"codersrank-activity-legend-item codersrank-activity-legend-item-4\"></span>\n        <span class=\"codersrank-activity-legend-label\">More</span>\n      </div>\n      ` : ''}\n      ${branding ? /* html */`\n      <div class=\"codersrank-activity-branding\">\n        <a href=\"https://codersrank.io\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <span>Powered by </span>\n          ${codersrRankLogo}\n        </a>\n      </div>\n      ` : ''}\n    </div>\n  `;\n};\n","export const renderError = () => {\n  return '';\n};\n","import { renderChart } from './render-chart';\n\nexport const renderLoading = (ctx) => {\n  return renderChart({\n    ...ctx,\n    preloader: true,\n    data: {},\n  });\n};\n","export const icons = {\n  github:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"56\" height=\"56\" viewBox=\"0 0 56 56\"><path fill=\"#fff\" fill-rule=\"evenodd\" d=\"M0,25.0007674 C0,36.0462261 7.1625894,45.4157586 17.0969029,48.7215691 C18.3477086,48.9517788 18.8035237,48.1798091 18.8035237,47.5168053 C18.8035237,46.9243992 18.7820375,45.3512999 18.7697597,43.2656005 C11.8158937,44.7757758 10.3486909,39.9137481 10.3486909,39.9137481 C9.21145523,37.0253845 7.57236256,36.2564842 7.57236256,36.2564842 C5.30249547,34.706406 7.74425243,34.7371006 7.74425243,34.7371006 C10.2535376,34.9135946 11.5734062,37.3139139 11.5734062,37.3139139 C13.8033703,41.1338592 17.4253353,40.0303877 18.8495657,39.3904049 C19.0767059,37.7758679 19.7228276,36.6739311 20.4364775,36.0492956 C14.8853556,35.4185211 9.04877375,33.2729672 9.04877375,23.6931766 C9.04877375,20.9644249 10.0233279,18.7313914 11.6225176,16.9848676 C11.3646828,16.3525584 10.5067682,13.8095092 11.8680745,10.3686424 C11.8680745,10.3686424 13.9660518,9.69643022 18.7421345,12.9316431 C20.73575,12.3760705 22.875165,12.0998189 25.0007674,12.0890758 C27.124835,12.0998189 29.2627152,12.3760705 31.2594002,12.9316431 C36.0324135,9.69643022 38.1273213,10.3686424 38.1273213,10.3686424 C39.4916971,13.8095092 38.6337825,16.3525584 38.3774824,16.9848676 C39.9797416,18.7313914 40.9466221,20.9644249 40.9466221,23.6931766 C40.9466221,33.2975229 35.1008318,35.4108475 29.5328279,36.0293441 C30.4291108,36.8013137 31.2287056,38.3268363 31.2287056,40.6596274 C31.2287056,44.0007367 31.198011,46.697259 31.198011,47.5168053 C31.198011,48.185948 31.6492219,48.9640566 32.9169097,48.7200344 C42.8435495,45.4065502 50,36.0431566 50,25.0007674 C50,11.1927929 38.8056724,0 24.9976979,0 C11.1943276,0 0,11.1927929 0,25.0007674 Z\" transform=\"translate(3 3)\"/></svg>',\n  stackoverflow:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"56\" height=\"56\" viewBox=\"0 0 56 56\"><path fill=\"#ee7a06\" d=\"M5.22307574,30.9345 L5.22307574,44.4341791 L36.3289243,44.4341791 L36.3289243,30.9345 L40.776,30.9345 L40.776,48.9345 L0.776,48.9345 L0.776,30.9345 L5.22307574,30.9345 Z M32,35 L32,40 L10,40 L10,35 L32,35 Z M10.9277895,25 L33,29.6115033 L32.0722105,34 L10,29.3884967 L10.9277895,25 Z M14.8746402,16 L35,25.0945103 L33.1253598,29 L13,19.9054897 L14.8746402,16 Z M20.8556275,7 L38,20.7080348 L35.1443725,24 L18,10.2919652 L20.8556275,7 Z M29.6024511,0 L43,17.4101966 L39.3975489,20 L26,2.58980337 L29.6024511,0 Z\" transform=\"translate(6 4)\"/></svg>',\n  folder:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"56\" height=\"56\" viewBox=\"0 0 56 56\"><path fill=\"#fff\" d=\"M 47.5700 10.5625 L 24.7655 10.5625 C 23.1718 10.5625 22.2108 10.1641 21.0389 9.1797 L 19.6093 7.9844 C 18.0624 6.6953 16.8671 6.2500 14.5468 6.2500 L 7.5624 6.2500 C 3.4608 6.2500 1.0936 8.5937 1.0936 13.3281 L 1.0936 19.5859 L 54.9064 19.5859 L 54.9064 17.8047 C 54.9064 12.9766 52.4454 10.5625 47.5700 10.5625 Z M 8.4530 49.7500 L 48.2732 49.7500 C 52.4684 49.7500 54.9064 47.3125 54.9064 42.4844 L 54.9064 22.7735 L 1.0936 22.7735 L 1.0936 42.4844 C 1.0936 47.3359 3.5780 49.7500 8.4530 49.7500 Z\"/></svg>',\n  gitlab: `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"350\" height=\"350\" viewBox=\"0 0 350 350\"><g fill=\"none\" transform=\"translate(6 20)\"><path fill=\"#FC6D26\" d=\"M337.17,177.83 L318.26,119.71 L280.84,4.43 C279.956602,1.7925919 277.486423,0.0149148401 274.705,0.0149148401 C271.923577,0.0149148401 269.453398,1.7925919 268.57,4.43 L231.15,119.64 L106.82,119.64 L69.4,4.43 C68.5220965,1.78979642 66.0523353,0.00830812195 63.27,0.00830812195 C60.4876647,0.00830812195 58.0179035,1.78979642 57.14,4.43 L19.78,119.64 L0.87,177.83 C-0.853328917,183.12969 1.02714845,188.936572 5.53,192.22 L169,311 L332.44,192.22 C336.963325,188.951421 338.871954,183.144831 337.17,177.83\"/><polygon fill=\"#E24329\" points=\"63 191.91 63 191.91 125.16 .63 .87 .63\" transform=\"translate(106 119)\"/><polygon fill=\"#FC6D26\" points=\"150 191.91 87.82 .63 .82 .63\" transform=\"translate(19 119)\"/><path fill=\"#FCA326\" d=\"M19.75,0.69 L19.75,0.69 L0.84,58.81 C-0.883328917,64.1096898 0.997148451,69.9165716 5.5,73.2 L169,192 L19.75,0.69 Z\" transform=\"translate(0 119)\"/><path fill=\"#E24329\" d=\"M0.78,119.69 L87.89,119.69 L50.4,4.49 C49.5166016,1.8525919 47.046423,0.0749148401 44.265,0.0749148401 C41.483577,0.0749148401 39.0133984,1.8525919 38.13,4.49 L0.78,119.69 Z\" transform=\"translate(19)\"/><polygon fill=\"#FC6D26\" points=\"0 191.91 62.16 .63 149.3 .63\" transform=\"translate(169 119)\"/><path fill=\"#FCA326\" d=\"M149.24,0.69 L149.24,0.69 L168.15,58.81 C169.883261,64.1096795 168.000893,69.9224023 163.49,73.2 L0,191.91 L149.2,0.69 L149.24,0.69 Z\" transform=\"translate(169 119)\"/><path fill=\"#E24329\" d=\"M87.28,119.69 L0.18,119.69 L37.6,4.49 C38.4779035,1.84979642 40.9476647,0.0683081219 43.73,0.0683081219 C46.5123353,0.0683081219 48.9820965,1.84979642 49.86,4.49 L87.28,119.69 Z\" transform=\"translate(231)\"/></g></svg>\n  `,\n};\n","import { fetchData } from './shared/fetch-data';\nimport { renderChart } from './shared/render-chart';\nimport { renderError } from './shared/render-error';\nimport { renderLoading } from './shared/render-loading';\nimport { icons } from './shared/icons';\n\n// eslint-disable-next-line\nconst COMPONENT_TAG = 'codersrank-activity';\nconst STATE_IDLE = 0;\nconst STATE_LOADING = 1;\nconst STATE_ERROR = 2;\nconst STATE_SUCCESS = 3;\n\n// eslint-disable-next-line\nconst STYLES = `$_STYLES_$`;\n\n// eslint-disable-next-line\nclass CodersRankActivity extends HTMLElement {\n  constructor() {\n    super();\n\n    this.tempDiv = document.createElement('div');\n    this.shadowEl = this.attachShadow({ mode: 'closed' });\n\n    this.stylesEl = document.createElement('style');\n    this.stylesEl.textContent = STYLES;\n    this.shadowEl.appendChild(this.stylesEl);\n    this.onMouseEnter = this.onMouseEnter.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n\n    this.mounted = false;\n\n    this.state = STATE_IDLE;\n\n    this.data = null;\n  }\n\n  // eslint-disable-next-line\n  getTotalActivities(data = {}) {\n    let total = 0;\n    Object.keys(data).forEach((date) => {\n      Object.keys(data[date]).forEach((source) => {\n        total += data[date][source] || 0;\n      });\n    });\n    return total;\n  }\n\n  emitData(data = {}) {\n    const event = new CustomEvent('data', {\n      detail: { data, total: this.getTotalActivities(data) },\n    });\n    this.dispatchEvent(event);\n  }\n\n  emitError(err) {\n    const event = new CustomEvent('error', { detail: err });\n    this.dispatchEvent(event);\n  }\n\n  static get observedAttributes() {\n    return ['username', 'weeks', 'svg-width', 'legend', 'labels', 'id'];\n  }\n\n  get tooltip() {\n    const tooltip = this.getAttribute('tooltip');\n    if (tooltip === '' || tooltip === 'true') return true;\n    return false;\n  }\n\n  set tooltip(value) {\n    this.setAttribute('tooltip', value);\n  }\n\n  get id() {\n    return this.getAttribute('id');\n  }\n\n  set id(value) {\n    this.setAttribute('id', value);\n  }\n\n  get username() {\n    return this.getAttribute('username');\n  }\n\n  set username(value) {\n    this.setAttribute('username', value);\n  }\n\n  get weeks() {\n    return Math.min(parseInt(this.getAttribute('weeks') || 52, 10), 52);\n  }\n\n  set weeks(value) {\n    this.setAttribute('weeks', value);\n  }\n\n  get svgWidth() {\n    const svgWidth = parseInt(this.getAttribute('svg-width') || 0, 10);\n    if (!svgWidth && this.weeks < 52) {\n      return 800 / (52 / this.weeks);\n    }\n    return svgWidth || 800;\n  }\n\n  set svgWidth(value) {\n    this.setAttribute('svg-width', value);\n  }\n\n  set ['svg-width'](value) {\n    this.setAttribute('svg-width', value);\n  }\n\n  get legend() {\n    const legend = this.getAttribute('legend');\n    if (legend === '' || legend === 'true') return true;\n    return false;\n  }\n\n  set legend(value) {\n    this.setAttribute('legend', value);\n  }\n\n  get labels() {\n    const labels = this.getAttribute('labels');\n    if (labels === '' || labels === 'true') return true;\n    return false;\n  }\n\n  set labels(value) {\n    this.setAttribute('labels', value);\n  }\n\n  get step() {\n    return parseInt(this.getAttribute('step') || 10, 10);\n  }\n\n  set step(value) {\n    this.setAttribute('step', value);\n  }\n\n  get branding() {\n    return this.getAttribute('branding') !== 'false';\n  }\n\n  set branding(value) {\n    this.setAttribute('branding', value);\n  }\n\n  render() {\n    const {\n      username,\n      id,\n      mounted,\n      state,\n      shadowEl,\n      data,\n      weeks,\n      svgWidth,\n      legend,\n      labels,\n      step,\n      branding,\n      tempDiv,\n    } = this;\n    const ctx = {\n      data,\n      weeks,\n      svgWidth,\n      legend,\n      labels,\n      step,\n      branding,\n    };\n\n    if ((!username && !id) || !mounted) return;\n    if (state === STATE_SUCCESS) {\n      tempDiv.innerHTML = renderChart(ctx);\n    } else if (state === STATE_ERROR) {\n      tempDiv.innerHTML = renderError(ctx);\n    } else if (state === STATE_IDLE || state === STATE_LOADING) {\n      tempDiv.innerHTML = renderLoading(ctx);\n    }\n\n    let widgetEl = shadowEl.querySelector('.codersrank-activity');\n    if (widgetEl) {\n      widgetEl.parentNode.removeChild(widgetEl);\n    }\n    widgetEl = tempDiv.querySelector('.codersrank-activity');\n    if (!widgetEl) return;\n    this.widgetEl = widgetEl;\n    this.detachEvents();\n    this.attachEvents();\n    shadowEl.appendChild(widgetEl);\n  }\n\n  loadAndRender() {\n    const { username, id } = this;\n    this.state = STATE_LOADING;\n    this.render();\n    fetchData(username, id)\n      .then((data) => {\n        this.emitData(data);\n        this.data = data;\n        this.state = STATE_SUCCESS;\n        this.render();\n      })\n      .catch((err) => {\n        this.emitError(err);\n        this.state = STATE_ERROR;\n        this.render();\n      });\n  }\n\n  activitiesInDay(date) {\n    let activities = 0;\n    if (!this.data || !date) return activities;\n    const dayData = this.data[date];\n    if (dayData) {\n      Object.keys(dayData).forEach((key) => {\n        // @ts-ignore\n        activities += dayData[key];\n      });\n    }\n    return activities;\n  }\n\n  tooltipText(date) {\n    const data = this.data[date];\n    const activities = this.activitiesInDay(date);\n    const formatter = Intl.DateTimeFormat();\n    // prettier-ignore\n    return `\n        <div class=\"codersrank-activity-tooltip-header\">\n          ${formatter.format(new Date(date))} - <b>${activities} activities</b>\n        </div>\n        <ul class=\"codersrank-activity-tooltip-list\">\n          ${data.github ? `\n          <li><i>${icons.github}</i>${data.github} activities</li>\n          ` : ''}\n          ${data.gitlab ? `\n          <li><i>${icons.gitlab}</i>${data.gitlab} activities</li>\n          ` : ''}\n          ${data.private ? `\n          <li><i>${icons.folder}</i>${data.private} activities</li>\n          ` : ''}\n          ${data.stackoverflow ? `\n          <li><i>${icons.stackoverflow}</i>${data.stackoverflow} activities</li>\n          ` : ''}\n        </ul>\n      `;\n  }\n\n  showTooltip(date) {\n    if (!this.data || !date || !this.tooltip || !this.widgetEl) return;\n    const data = this.data[date];\n    if (!data) return;\n\n    const rectEl = this.shadowEl.querySelector(`[data-date=\"${date}\"]`);\n    if (!rectEl) return;\n    this.tempDiv.innerHTML = `\n      <div class=\"codersrank-activity-tooltip\">\n        ${this.tooltipText(date)}\n        <div class=\"codersrank-activity-tooltip-angle\"></div>\n      </div>\n    `;\n    const widgetElRect = this.getBoundingClientRect();\n    const rectElRect = rectEl.getBoundingClientRect();\n    const tooltipEl = this.tempDiv.querySelector('.codersrank-activity-tooltip');\n    let left = rectElRect.left - widgetElRect.left;\n    let diff = -5;\n    if (left < 110) {\n      diff = -5 - (110 - left);\n      left = 110;\n    }\n    if (left + 110 > widgetElRect.width) {\n      diff = -5 + 110 - (widgetElRect.width - left);\n      left = widgetElRect.width - 110;\n    }\n\n    diff = Math.max(Math.min(diff, 105), -105);\n\n    tooltipEl.style.left = `${left}px`;\n    tooltipEl.style.top = `${rectElRect.top - widgetElRect.top}px`;\n    tooltipEl.querySelector(\n      '.codersrank-activity-tooltip-angle',\n    ).style.marginLeft = `${diff}px`;\n    this.shadowEl.appendChild(tooltipEl);\n  }\n\n  hideTooltip() {\n    if (!this.tooltip || !this.widgetEl) return;\n    const tooltipEl = this.shadowEl.querySelector('.codersrank-activity-tooltip');\n    if (!tooltipEl) return;\n    this.shadowEl.removeChild(tooltipEl);\n  }\n\n  onMouseEnter(e) {\n    if (e.target.tagName !== 'rect') return;\n    const el = e.target;\n    const date = el.getAttribute('data-date');\n    this.showTooltip(date);\n  }\n\n  onMouseLeave() {\n    this.hideTooltip();\n  }\n\n  attributeChangedCallback() {\n    if (!this.mounted) return;\n    this.loadAndRender();\n  }\n\n  attachEvents() {\n    if (!this.widgetEl) return;\n    this.widgetEl.addEventListener('mouseenter', this.onMouseEnter, true);\n    this.widgetEl.addEventListener('mouseleave', this.onMouseLeave, true);\n  }\n\n  detachEvents() {\n    if (!this.widgetEl) return;\n    this.widgetEl.removeEventListener('mouseenter', this.onMouseEnter, true);\n    this.widgetEl.removeEventListener('mouseleave', this.onMouseLeave, true);\n  }\n\n  connectedCallback() {\n    this.width = this.offsetWidth;\n    this.mounted = true;\n    this.loadAndRender();\n  }\n\n  disconnectedCallback() {\n    this.mounted = false;\n    this.detachEvents();\n  }\n}\n\n// EXPORT\n"],"names":["cache","fetchData","username","id","Promise","resolve","endpoint","fetch","method","headers","then","res","json","data","err","reject","codersrRankLogo","renderChart","weeks","svgWidth","legend","labels","preloader","step","branding","width","spacing","wdays","months","xOffset","yOffset","weeksArray","i","push","daysArray","rectSize","chartWidth","chartHeight","totalDays","numberOfDays","todayWeekDay","Date","getDay","monthsColumns","cols","startDateTime","getTime","month","weekStartMonth","getMonth","weekIndex","dayDate","dayIndex","minusDays","date","zerofy","num","getFullYear","getDate","isDayDisabled","dayNumber","activitiesInDay","activities","dayData","Object","keys","forEach","key","dayClasses","classes","level","Math","min","floor","join","map","w","d","wday","index","monthData","renderError","renderLoading","ctx","icons","github","stackoverflow","folder","gitlab","COMPONENT_TAG","STATE_IDLE","STATE_LOADING","STATE_ERROR","STATE_SUCCESS","STYLES","CodersRankActivity","tempDiv","document","createElement","shadowEl","attachShadow","mode","stylesEl","textContent","appendChild","onMouseEnter","bind","onMouseLeave","mounted","state","getTotalActivities","total","source","emitData","event","CustomEvent","detail","dispatchEvent","emitError","render","innerHTML","widgetEl","querySelector","parentNode","removeChild","detachEvents","attachEvents","loadAndRender","tooltipText","formatter","Intl","DateTimeFormat","format","showTooltip","tooltip","rectEl","widgetElRect","getBoundingClientRect","rectElRect","tooltipEl","left","diff","max","style","top","marginLeft","hideTooltip","e","target","tagName","el","getAttribute","attributeChangedCallback","addEventListener","removeEventListener","connectedCallback","offsetWidth","disconnectedCallback","value","setAttribute","parseInt","HTMLElement"],"mappings":"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"}