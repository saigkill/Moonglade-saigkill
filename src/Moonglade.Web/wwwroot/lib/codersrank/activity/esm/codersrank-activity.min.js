/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/@codersrank/activity@0.9.14/esm/codersrank-activity.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,t)},_wrapNativeSuper(t)}function _construct(t,e,r){return _construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return r&&_setPrototypeOf(o,r.prototype),o},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}import{fetchData}from"./shared/fetch-data";import{renderChart}from"./shared/render-chart";import{renderError}from"./shared/render-error";import{renderLoading}from"./shared/render-loading";import{icons}from"./shared/icons";var COMPONENT_TAG="codersrank-activity",STATE_IDLE=0,STATE_LOADING=1,STATE_ERROR=2,STATE_SUCCESS=3,STYLES=":host{--font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif;--label-font-size:9px;--label-text-color:#999ea4;--legend-font-size:12px;--legend-text-color:#999ea4;--legend-item-width:14px;--legend-item-height:14px;--legend-margin:1em 0 0 0;--bg-color-0:#f6f6f6;--bg-color-1:rgba(80, 176, 186, 0.3);--bg-color-2:rgba(80, 176, 186, 0.6);--bg-color-3:rgba(80, 176, 186, 1);--bg-color-4:#24565a;--border-color-0:transparent;--border-color-1:transparent;--border-color-2:transparent;--border-color-3:transparent;--border-color-4:transparent;--svg-width:100%;--svg-height:auto;--preloader-color:#72a0a8;--tooltip-font-size:14px;--branding-text-color:inherit;width:100%;display:block;position:relative}.codersrank-activity{font-family:var(--font-family);position:relative}.codersrank-activity-preloader{position:absolute;left:50%;top:50%;width:32px;height:32px;margin:-16px 0 0 -16px;border:3px solid var(--preloader-color);border-left-color:transparent;border-bottom-color:transparent;border-radius:50%;box-sizing:border-box;-webkit-animation:preloader 1s infinite linear;animation:preloader 1s infinite linear}.codersrank-activity-chart{width:100%;position:relative}.codersrank-activity-chart svg{width:var(--svg-width);height:var(--svg-height)}.codersrank-activity-day{fill:var(--bg-color-0);stroke-width:1;stroke:var(--border-color-0)}.codersrank-activity-day-1{fill:var(--bg-color-1);stroke:var(--border-color-1)}.codersrank-activity-day-2{fill:var(--bg-color-2);stroke:var(--border-color-2)}.codersrank-activity-day-3{fill:var(--bg-color-3);stroke:var(--border-color-3)}.codersrank-activity-day-4{fill:var(--bg-color-4);stroke:var(--border-color-4)}.codersrank-activity-day-disabled{display:none}.codersrank-activity-month,.codersrank-activity-wday{font-size:var(--label-font-size);fill:var(--label-text-color)}.codersrank-activity-wday:nth-child(2n){display:none}.codersrank-activity-tooltip{text-align:left;position:absolute;background:#000;transform:translateX(-50%) translateY(-100%);border-radius:4px;color:#fff;font-family:var(--font-family);padding:8px;font-size:var(--tooltip-font-size);white-space:nowrap;pointer-events:none;margin-top:-10px;width:200px;line-height:1.5}.codersrank-activity-tooltip-angle{width:0px;height:0px;position:absolute;left:50%;top:100%;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #000;margin-left:-5px}.codersrank-activity-tooltip-header{padding-bottom:4px;margin-bottom:4px;border-bottom:1px solid rgba(255,255,255,.25)}.codersrank-activity-tooltip-list{list-style:none;margin:0;padding:0}.codersrank-activity-tooltip-list li{display:flex;align-items:center}.codersrank-activity-tooltip-list i{text-align:center;font-size:16px;width:16px;height:16px;margin-right:8px;display:block}.codersrank-activity-tooltip-list i svg{display:block;width:16px;height:16px}.codersrank-activity-legend{display:flex;justify-content:flex-end;align-items:center;color:var(--legend-text-color);line-height:1;font-size:var(--legend-font-size);margin:var(--legend-margin)}.codersrank-activity-legend-label:first-child{margin-right:8px}.codersrank-activity-legend-label:last-child{margin-left:8px}.codersrank-activity-legend-item{box-sizing:border-box;width:var(--legend-item-width);height:var(--legend-item-height);background-color:var(--bg-color-0);border:1px solid var(--border-color-0);margin:0 2px;border-radius:2px}.codersrank-activity-legend-item-1{background-color:var(--bg-color-1);border-color:var(--border-color-1)}.codersrank-activity-legend-item-2{background-color:var(--bg-color-2);border-color:var(--border-color-2)}.codersrank-activity-legend-item-3{background-color:var(--bg-color-3);border-color:var(--border-color-3)}.codersrank-activity-legend-item-4{background-color:var(--bg-color-4);border-color:var(--border-color-4)}.codersrank-activity-legend+.codersrank-activity-branding{margin-top:.5em}.codersrank-activity-branding{justify-content:flex-end;align-items:center;font-size:12px;color:var(--branding-text-color);display:flex}.codersrank-activity-branding a{opacity:.5;display:flex;align-items:center;color:inherit;text-decoration:none;transition-duration:.2s;position:relative;z-index:1;transform:translate3d(0,0,0)}.codersrank-activity-branding a:hover{opacity:1}.codersrank-activity-branding span{margin-right:4px}.codersrank-activity-branding svg{height:16px;width:auto}@-webkit-keyframes preloader{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes preloader{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}",CodersRankActivity=function(t){function e(){var e;return(e=t.call(this)||this).tempDiv=document.createElement("div"),e.shadowEl=e.attachShadow({mode:"closed"}),e.stylesEl=document.createElement("style"),e.stylesEl.textContent=STYLES,e.shadowEl.appendChild(e.stylesEl),e.onMouseEnter=e.onMouseEnter.bind(_assertThisInitialized(e)),e.onMouseLeave=e.onMouseLeave.bind(_assertThisInitialized(e)),e.mounted=!1,e.state=STATE_IDLE,e.data=null,e}_inheritsLoose(e,t);var r=e.prototype;return r.getTotalActivities=function(t){void 0===t&&(t={});var e=0;return Object.keys(t).forEach((function(r){Object.keys(t[r]).forEach((function(i){e+=t[r][i]||0}))})),e},r.emitData=function(t){void 0===t&&(t={});var e=new CustomEvent("data",{detail:{data:t,total:this.getTotalActivities(t)}});this.dispatchEvent(e)},r.emitError=function(t){var e=new CustomEvent("error",{detail:t});this.dispatchEvent(e)},r.render=function(){var t=this.username,e=this.id,r=this.mounted,i=this.state,o=this.shadowEl,n=this.data,a=this.weeks,s=this.svgWidth,c=this.legend,l=this.labels,d=this.step,h=this.branding,u=this.tempDiv,p={data:n,weeks:a,svgWidth:s,legend:c,labels:l,step:d,branding:h};if((t||e)&&r){i===STATE_SUCCESS?u.innerHTML=renderChart(p):i===STATE_ERROR?u.innerHTML=renderError(p):i!==STATE_IDLE&&i!==STATE_LOADING||(u.innerHTML=renderLoading(p));var f=o.querySelector(".codersrank-activity");f&&f.parentNode.removeChild(f),(f=u.querySelector(".codersrank-activity"))&&(this.widgetEl=f,this.detachEvents(),this.attachEvents(),o.appendChild(f))}},r.loadAndRender=function(){var t=this,e=this.username,r=this.id;this.state=STATE_LOADING,this.render(),fetchData(e,r).then((function(e){t.emitData(e),t.data=e,t.state=STATE_SUCCESS,t.render()})).catch((function(e){t.emitError(e),t.state=STATE_ERROR,t.render()}))},r.activitiesInDay=function(t){var e=0;if(!this.data||!t)return e;var r=this.data[t];return r&&Object.keys(r).forEach((function(t){e+=r[t]})),e},r.tooltipText=function(t){var e=this.data[t],r=this.activitiesInDay(t);return'\n        <div class="codersrank-activity-tooltip-header">\n          '+Intl.DateTimeFormat().format(new Date(t))+" - <b>"+r+' activities</b>\n        </div>\n        <ul class="codersrank-activity-tooltip-list">\n          '+(e.github?"\n          <li><i>"+icons.github+"</i>"+e.github+" activities</li>\n          ":"")+"\n          "+(e.gitlab?"\n          <li><i>"+icons.gitlab+"</i>"+e.gitlab+" activities</li>\n          ":"")+"\n          "+(e.private?"\n          <li><i>"+icons.folder+"</i>"+e.private+" activities</li>\n          ":"")+"\n          "+(e.stackoverflow?"\n          <li><i>"+icons.stackoverflow+"</i>"+e.stackoverflow+" activities</li>\n          ":"")+"\n        </ul>\n      "},r.showTooltip=function(t){if(this.data&&t&&this.tooltip&&this.widgetEl&&this.data[t]){var e=this.shadowEl.querySelector('[data-date="'+t+'"]');if(e){this.tempDiv.innerHTML='\n      <div class="codersrank-activity-tooltip">\n        '+this.tooltipText(t)+'\n        <div class="codersrank-activity-tooltip-angle"></div>\n      </div>\n    ';var r=this.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.tempDiv.querySelector(".codersrank-activity-tooltip"),n=i.left-r.left,a=-5;n<110&&(a=-5-(110-n),n=110),n+110>r.width&&(a=105-(r.width-n),n=r.width-110),a=Math.max(Math.min(a,105),-105),o.style.left=n+"px",o.style.top=i.top-r.top+"px",o.querySelector(".codersrank-activity-tooltip-angle").style.marginLeft=a+"px",this.shadowEl.appendChild(o)}}},r.hideTooltip=function(){if(this.tooltip&&this.widgetEl){var t=this.shadowEl.querySelector(".codersrank-activity-tooltip");t&&this.shadowEl.removeChild(t)}},r.onMouseEnter=function(t){if("rect"===t.target.tagName){var e=t.target.getAttribute("data-date");this.showTooltip(e)}},r.onMouseLeave=function(){this.hideTooltip()},r.attributeChangedCallback=function(){this.mounted&&this.loadAndRender()},r.attachEvents=function(){this.widgetEl&&(this.widgetEl.addEventListener("mouseenter",this.onMouseEnter,!0),this.widgetEl.addEventListener("mouseleave",this.onMouseLeave,!0))},r.detachEvents=function(){this.widgetEl&&(this.widgetEl.removeEventListener("mouseenter",this.onMouseEnter,!0),this.widgetEl.removeEventListener("mouseleave",this.onMouseLeave,!0))},r.connectedCallback=function(){this.width=this.offsetWidth,this.mounted=!0,this.loadAndRender()},r.disconnectedCallback=function(){this.mounted=!1,this.detachEvents()},_createClass(e,[{key:"tooltip",get:function(){var t=this.getAttribute("tooltip");return""===t||"true"===t},set:function(t){this.setAttribute("tooltip",t)}},{key:"id",get:function(){return this.getAttribute("id")},set:function(t){this.setAttribute("id",t)}},{key:"username",get:function(){return this.getAttribute("username")},set:function(t){this.setAttribute("username",t)}},{key:"weeks",get:function(){return Math.min(parseInt(this.getAttribute("weeks")||52,10),52)},set:function(t){this.setAttribute("weeks",t)}},{key:"svgWidth",get:function(){var t=parseInt(this.getAttribute("svg-width")||0,10);return!t&&this.weeks<52?800/(52/this.weeks):t||800},set:function(t){this.setAttribute("svg-width",t)}},{key:"svg-width",set:function(t){this.setAttribute("svg-width",t)}},{key:"legend",get:function(){var t=this.getAttribute("legend");return""===t||"true"===t},set:function(t){this.setAttribute("legend",t)}},{key:"labels",get:function(){var t=this.getAttribute("labels");return""===t||"true"===t},set:function(t){this.setAttribute("labels",t)}},{key:"step",get:function(){return parseInt(this.getAttribute("step")||10,10)},set:function(t){this.setAttribute("step",t)}},{key:"branding",get:function(){return"false"!==this.getAttribute("branding")},set:function(t){this.setAttribute("branding",t)}}],[{key:"observedAttributes",get:function(){return["username","weeks","svg-width","legend","labels","id"]}}]),e}(_wrapNativeSuper(HTMLElement));export default CodersRankActivity;
//# sourceMappingURL=/sm/215569902d9050e4a1af7a87fb56e2f081e448acfa6e53b10c3f43fa23dc84aa.map