{"version":3,"file":"codersrank-timeline.js.map","sources":["../src/shared/fetch-data.js","../src/shared/codersrank-logo.js","../src/shared/render.js","../src/shared/render-error.js","../src/shared/render-loading.js","../src/shared/difference-in-months.js","../src/shared/format-data.js","../src/shared/string-to-color.js","../src/shared/company-logo.js","../src/shared/sanitize-description.js","../src/shared/render-tooltip.js","../src/codersrank-timeline.js"],"sourcesContent":["const cache = {\n  projects: {},\n  work_experiences: {},\n};\n\nexport const fetchData = (username, type) => {\n  let endpoint = 'work_experiences';\n  if (type === 'portfolio') endpoint = 'projects';\n  if (cache[endpoint][username]) return Promise.resolve(cache[endpoint][username]);\n  if (type === 'technologies') {\n    return Promise.all([\n      fetchData(username, 'portfolio'),\n      fetchData(username, 'workexperience'),\n    ])\n      .then(([projects, work_experiences]) => {\n        projects.forEach((item) => {\n          // eslint-disable-next-line\n          item._type = 'portfolio';\n        });\n        work_experiences.forEach((item) => {\n          // eslint-disable-next-line\n          item._type = 'workexperience';\n        });\n        return [...projects, ...work_experiences];\n      })\n      .catch((err) => {\n        // eslint-disable-next-line\n        console.error(err);\n        return Promise.reject(err);\n      });\n  }\n\n  return fetch(`https://api.codersrank.io/v2/users/${username}/${endpoint}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      let projects;\n      let workExperiences;\n      if (typeof data.projects !== 'undefined') {\n        projects = data.projects.filter((e) => {\n          return e.start_date !== '0001-01';\n        });\n      }\n      if (typeof data.work_experiences !== 'undefined') {\n        workExperiences = data.work_experiences.filter((e) => {\n          return e.start_date !== '0001-01';\n        });\n      }\n      cache[endpoint][username] = projects || workExperiences || [];\n      return projects || workExperiences || [];\n    })\n    .catch((err) => {\n      // eslint-disable-next-line\n      console.error(err);\n      return Promise.reject(err);\n    });\n};\n","export const codersRankLogo = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"258\" height=\"39\" viewBox=\"0 0 258 39\"><path fill=\"#19223C\" d=\"M71.358 27.687A8.076 8.076 0 0 1 69 21.999c0-2.122.846-4.162 2.358-5.687a8.022 8.022 0 0 1 2.664-1.688 8.175 8.175 0 0 1 3.126-.543 8.298 8.298 0 0 1 4.723 1.339 7.155 7.155 0 0 1 2.895 3.791H80.12a3 3 0 0 0-1.182-1.283 3.106 3.106 0 0 0-1.713-.427 4.128 4.128 0 0 0-1.694.264 4.046 4.046 0 0 0-1.43.926 5.197 5.197 0 0 0-1.133 3.234c0 1.17.399 2.309 1.134 3.234.403.405.89.72 1.43.926a4.128 4.128 0 0 0 1.693.264c.586.039 1.17-.087 1.684-.364a3.01 3.01 0 0 0 1.211-1.198h4.571a7.156 7.156 0 0 1-2.895 3.792 8.298 8.298 0 0 1-4.723 1.338 8.173 8.173 0 0 1-3.085-.557 8.02 8.02 0 0 1-2.629-1.673zM88.652 27.687a8.076 8.076 0 0 1-2.359-5.688c0-2.122.846-4.162 2.359-5.687a8.57 8.57 0 0 1 5.79-2.238c2.15 0 4.221.8 5.79 2.238a8.076 8.076 0 0 1 2.358 5.687 8.076 8.076 0 0 1-2.359 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 98.623 22c0-1.17-.4-2.308-1.134-3.234a4.398 4.398 0 0 0-3.048-1.219c-1.14 0-2.234.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.048-1.219zM110.592 14.304a9.126 9.126 0 0 1 6.247 2.156 7.73 7.73 0 0 1 1.8 2.546 7.573 7.573 0 0 1 0 6.06 7.73 7.73 0 0 1-1.8 2.546 9.049 9.049 0 0 1-6.247 2.156h-5.561V14.304h5.561zm-1.752 12.64h1.752a4.596 4.596 0 0 0 1.903-.295 4.504 4.504 0 0 0 1.602-1.044 4.909 4.909 0 0 0 1.295-3.569 4.909 4.909 0 0 0-1.295-3.568 4.504 4.504 0 0 0-1.602-1.044 4.595 4.595 0 0 0-1.903-.294h-1.752v9.813zM131.313 14.23v2.9h-5.714v3.345h5.104v2.9H125.6v3.568h5.714v2.9h-9.599V14.23zM138.55 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32h-4.418l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM155.158 17.055a1.86 1.86 0 0 0-1.22.372c-.159.138-.284.311-.363.505-.08.193-.111.402-.093.61a1.528 1.528 0 0 0 .457 1.115c.32.31.712.539 1.143.67l1.523.445 1.676.52 1.524.744c.487.317.881.753 1.143 1.264.31.6.466 1.262.457 1.933a4.227 4.227 0 0 1-.45 1.859 4.333 4.333 0 0 1-1.226 1.487 6.424 6.424 0 0 1-4.343 1.412 6.899 6.899 0 0 1-4.342-1.263 4.331 4.331 0 0 1-1.278-1.588 4.223 4.223 0 0 1-.398-1.981h4.114c-.012.253.032.507.128.742.097.236.244.449.431.625a1.87 1.87 0 0 0 1.421.492c.475.02.94-.14 1.296-.447a1.382 1.382 0 0 0 .457-1.115 1.455 1.455 0 0 0-.457-1.115 2.986 2.986 0 0 0-1.143-.669l-1.524-.446-1.676-.52-1.523-.744a3.148 3.148 0 0 1-1.143-1.264 4 4 0 0 1-.305-1.859 4.15 4.15 0 0 1 .407-1.944 4.258 4.258 0 0 1 1.27-1.55 6.582 6.582 0 0 1 4.19-1.338 6.982 6.982 0 0 1 4.113 1.115 4.33 4.33 0 0 1 1.278 1.588c.292.62.428 1.299.398 1.98h-4.19a2.056 2.056 0 0 0-.533-1.263 1.611 1.611 0 0 0-1.22-.372zM168.261 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32H172.3l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM189.592 29.768l-.914-2.602h-5.714l-.914 2.602h-4.114l5.485-15.538h4.723l5.485 15.538h-4.037zm-5.638-5.501h3.733l-1.828-5.428-1.905 5.428zM205.972 14.23h3.885v15.538h-3.885l-6.476-9.813v9.813h-3.885V14.23h3.885l6.476 9.814zM217.093 29.768h-3.885V14.304h3.885v6.766l5.257-6.766h5.104l-6.552 7.732 6.552 7.732h-4.952l-5.333-6.84zM232.863 27.761a1.98 1.98 0 0 1-.5 1.253 2.07 2.07 0 0 1-1.197.664 2.1 2.1 0 0 1-1.359-.222 2.024 2.024 0 0 1-.91-1.01 1.962 1.962 0 0 1-.054-1.342c.141-.44.433-.82.827-1.076a2.096 2.096 0 0 1 2.583.246c.201.194.359.426.464.682.105.256.154.53.146.805z\"></path> <path fill=\"#67a4ac\" d=\"M235.301 29.768V14.304h3.885v15.464zM244.062 27.687a8.076 8.076 0 0 1-2.358-5.688c0-2.122.846-4.162 2.358-5.687a8.57 8.57 0 0 1 5.79-2.238c2.151 0 4.222.8 5.79 2.238A8.076 8.076 0 0 1 258 21.999a8.076 8.076 0 0 1-2.358 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 254.033 22c0-1.17-.399-2.308-1.134-3.234a4.398 4.398 0 0 0-3.047-1.219c-1.14 0-2.235.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.047-1.219z\"></path> <path d=\"M33.25.054L2.147 19.634C.682 20.52-.034 21.512.001 22.611v2.98c.035 1.1.768 2.075 2.2 2.926l15.393 8.885a.726.726 0 0 0 1.047-.373l3.456-8.352-7.33-4.15a1.317 1.317 0 0 1-.514-.477 1.346 1.346 0 0 1 .461-1.864l13.457-8.247L33.72.427a.324.324 0 0 0-.103-.36.31.31 0 0 0-.369-.013z\" fill=\"#19223c\"></path> <path d=\"M58.8 10.961L43.618 1.757a.726.726 0 0 0-1.047.32l-3.56 8.352 7.225 4.31c.208.113.381.282.502.488a1.347 1.347 0 0 1 0 1.363 1.318 1.318 0 0 1-.502.49l-13.561 7.98-5.76 13.407a.323.323 0 0 0 .026.452.312.312 0 0 0 .445-.026l9.949-6.012 3.927 5.64a.947.947 0 0 0 .785.425h9.425a.932.932 0 0 0 .832-.506.97.97 0 0 0-.047-.984l-6.388-9.79 12.933-7.82c1.466-.887 2.199-1.88 2.199-2.98V13.94c0-1.1-.733-2.092-2.2-2.979z\" fill=\"#67a4ac\"></path></svg>`;\n","import { codersRankLogo } from './codersrank-logo';\n\nexport const render = ({ data, preloader, branding, type } = {}) => {\n  const { rows = [], years = [] } = data;\n\n  const itemText = (item) => {\n    if (item.end_col - item.start_col < 2) return '';\n    if (type === 'workexperience') {\n      return `${item.title} @ ${item.company}`;\n    }\n    if (type === 'portfolio') {\n      return item.project_title || '';\n    }\n    if (type === 'technologies') {\n      return `<img src=\"https://icon-widget.codersrank.io/api/${encodeURIComponent(\n        item.name,\n      )}\">${item.name}`;\n    }\n    return '';\n  };\n\n  // prettier-ignore\n  return /* html */ `\n    <div class=\"codersrank-timeline ${preloader ? 'codersrank-timeline-loading' : ''}\">\n      ${preloader ? /* html */ `\n      <div class=\"codersrank-timeline-preloader\"></div>\n      ` : ''}\n      <div class=\"codersrank-timeline-wrap\">\n        <div class=\"codersrank-timeline-year-lines\">\n        ${years.map((year, yearIndex) => /* html */`\n          <div class=\"codersrank-timeline-year-line\" style=\"left: calc(var(--col-width) * ${12 * yearIndex})\"></div>\n        `).join('')}\n        </div>\n        <div class=\"codersrank-timeline-years\">\n          ${years.map((year) => /* html */`\n            <div class=\"codersrank-timeline-year\" style=\"width: calc(var(--col-width) * 12)\">\n              <span>${year}</span>\n            </div>\n          `).join('')}\n        </div>\n        <div class=\"codersrank-timeline-chart\" style=\"height: calc(var(--row-height) * ${rows.length})\">\n          ${rows.map((row, rowIndex) => /* html */`\n          <div class=\"codersrank-timeline-row\">\n            ${row.map((item) => /* html */`\n              <div class=\"codersrank-timeline-item-wrap\" style=\"left: calc(var(--col-width) * ${item.start_col}); width: calc(var(--col-width) * ${item.end_col - item.start_col}); height: var(--row-height); top: calc(var(--row-height) * ${rowIndex})\">\n                <div class=\"codersrank-timeline-item\" data-id=\"${item.id}\">\n                  <span>${itemText(item)}</span>\n                </div>\n              </div>\n            `).join('')}\n          </div>\n        `).join('')}\n        </div>\n      </div>\n\n      ${branding ? /* html */`\n      <div class=\"codersrank-timeline-branding\">\n        <a href=\"https://codersrank.io\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <span>Powered by </span>\n          ${codersRankLogo}\n        </a>\n      </div>\n      ` : ''}\n    </div>\n  `;\n};\n","export const renderError = () => {\n  return '';\n};\n","import { render } from './render';\n\nexport const renderLoading = (ctx) => {\n  return render({\n    ...ctx,\n    preloader: true,\n    data: [],\n  });\n};\n","export const differenceInMonths = (d1, d2) => {\n  let months;\n  months = (d2.getFullYear() - d1.getFullYear()) * 12;\n  months -= d1.getMonth();\n  months += d2.getMonth();\n  return Math.abs(months <= 0 ? 0 : months);\n};\n","import { differenceInMonths } from './difference-in-months';\n\nexport const formatData = (items = [], type) => {\n  const rows = [];\n  let startDate;\n  let endDate;\n  let totalCols;\n  const datesOverlap = (start1, end1, start2, end2) => {\n    if (start1 <= start2 && start2 <= end1) return true; // b starts in a\n    if (start1 <= end2 && end2 <= end1) return true; // b ends in a\n    if (start2 < start1 && end1 < end2) return true; // a in b\n    return false;\n  };\n  const techItems = [];\n  const addTechItem = (tech, start, end, item) => {\n    techItems.push({\n      name: tech,\n      start_date: start,\n      end_date: end,\n      items: [item],\n    });\n  };\n  const processTechItem = (tech, item) => {\n    const { start_date, end_date, is_current } = item;\n    const techStart = start_date ? new Date(start_date) : new Date();\n    const techEnd = end_date && !is_current ? new Date(end_date) : new Date();\n    const similarTechs = techItems.filter(\n      (t) => t.name.toLowerCase() === tech.toLowerCase(),\n    );\n\n    if (!similarTechs.length) {\n      addTechItem(tech, techStart, techEnd, item);\n    } else {\n      let overlap;\n      similarTechs.forEach((otherTech) => {\n        if (overlap) return;\n\n        const otherTechStart = otherTech.start_date\n          ? new Date(otherTech.start_date)\n          : new Date();\n        const otherTechEnd = otherTech.end_date\n          ? new Date(otherTech.end_date)\n          : new Date();\n        if (datesOverlap(techStart, techEnd, otherTechStart, otherTechEnd)) {\n          overlap = true;\n          /* eslint-disable */\n          otherTech.start_date = new Date(Math.min(techStart, otherTechStart));\n          otherTech.end_date = new Date(Math.max(techEnd, otherTechEnd));\n          /* eslint-enable */\n          otherTech.items.push(item);\n        }\n      });\n      if (!overlap) {\n        addTechItem(tech, techStart, techEnd, item);\n      }\n    }\n  };\n  if (type === 'technologies') {\n    items.sort((a, b) => {\n      const aStart = a.start_date ? new Date(a.start_date) : new Date();\n      const bStart = b.start_date ? new Date(b.start_date) : new Date();\n      return aStart - bStart;\n    });\n    items.forEach((item) => {\n      const techs = [...(item.highlighted_technologies || [])];\n      techs.forEach((tech) => {\n        processTechItem(tech, item);\n      });\n    });\n    // eslint-disable-next-line\n    items = techItems;\n  }\n  const setStartDate = (d = '') => {\n    startDate = new Date(d);\n    startDate.setMonth(0, 1);\n  };\n  const setEndDate = (d = '') => {\n    endDate = new Date(d);\n  };\n  setStartDate(new Date());\n\n  items.forEach((item) => {\n    const itemStartDate = new Date(item.start_date);\n    const itemEndDate = item.is_current ? new Date() : new Date(item.end_date);\n    if (itemStartDate < startDate) setStartDate(itemStartDate);\n    if (!endDate || itemEndDate > endDate) setEndDate(itemEndDate);\n  });\n\n  const itemsWithCols = [];\n\n  items.forEach((item, index) => {\n    const itemStartDate = new Date(item.start_date);\n    const itemEndDate = item.is_current ? new Date() : new Date(item.end_date);\n    const itemStartCol = differenceInMonths(startDate, itemStartDate);\n    const itemEndCol = itemStartCol + differenceInMonths(itemStartDate, itemEndDate);\n    if (!totalCols || itemEndCol > totalCols) totalCols = itemEndCol;\n\n    itemsWithCols.push({\n      start_col: itemStartCol,\n      end_col: itemEndCol,\n      id: index,\n      ...item,\n    });\n  });\n  itemsWithCols.sort((a, b) => {\n    return a.start_col > b.start_col ? 1 : -1;\n  });\n\n  const getRowIndex = (item, rowIndex) => {\n    const { start_col } = item;\n    if (!rows[rowIndex]) return rowIndex;\n    const previousItems = rows[rowIndex].slice(0, itemsWithCols.indexOf(item));\n    const hasClash = previousItems.filter((el) => el.end_col > start_col).length > 0;\n    if (hasClash) {\n      // eslint-disable-next-line\n      rowIndex += 1;\n      return getRowIndex(item, rowIndex);\n    }\n    return rowIndex;\n  };\n\n  itemsWithCols.forEach((item) => {\n    const rowIndex = getRowIndex(item, 0);\n\n    if (!rows[rowIndex]) {\n      rows[rowIndex] = [];\n    }\n\n    rows[rowIndex].push(item);\n  });\n\n  const getYears = () => {\n    const startYear = startDate.getFullYear();\n    const endYear = endDate.getFullYear();\n    const years = [startYear];\n    if (endYear > startYear) {\n      for (let i = 1; i <= endYear - startYear; i += 1) {\n        years.push(startYear + i);\n      }\n    }\n    return years;\n  };\n\n  return {\n    rows,\n    years: getYears(),\n  };\n};\n","/* eslint-disable no-bitwise */\n\nfunction hashCode(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i += 1) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n\n  return hash;\n}\n\nfunction intToRGB(i) {\n  const c = (i & 0x00ffffff).toString(16).toUpperCase();\n\n  return '00000'.substring(0, 6 - c.length) + c;\n}\n\nfunction stringToColor(str) {\n  const hashedHexNumber = intToRGB(hashCode(str));\n  return `#${hashedHexNumber}`.toLowerCase();\n}\n\nexport { stringToColor };\n","import { stringToColor } from './string-to-color';\n\nexport const companyLogo = (name, url) => {\n  const iconColor = stringToColor(name || '');\n  // prettier-ignore\n  return url ? /* html */`\n    <img src=\"${url}\" alt=\"${name}\" title=\"${name}\" />\n  ` : /* html */`\n    <svg title=\"${name}\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n      <rect width=\"32\" height=\"32\" fill=\"${iconColor}\" rx=\"3\" />\n      ${name ? /* html */`\n      <text\n        x=\"50%\"\n        y=\"50%\"\n        font-weight=\"bold\"\n        font-size=\"20\"\n        fill=\"#fff\"\n        dy=\"0\"\n        text-anchor=\"middle\"\n        dominant-baseline=\"middle\"\n      >\n        ${ name[0].toUpperCase() }\n      </text>\n      ` : ''}\n\n    </svg>\n  `;\n};\n","export const sanitizeDescription = (html = '') => {\n  return (html || '').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n/g, '<br>');\n};\n","import { companyLogo } from './company-logo';\nimport { differenceInMonths } from './difference-in-months';\nimport { sanitizeDescription } from './sanitize-description';\n\nexport const renderTooltip = (item, type) => {\n  const formatLocation = ({ location, is_remote }) => {\n    if (location === 'Remote, Earth' || is_remote) return 'Remote';\n    return location || '';\n  };\n  const formatDate = (date) => {\n    if (!date) return '';\n    const formatter = Intl.DateTimeFormat('en', { month: 'short', year: 'numeric' });\n    return formatter.format(new Date(date));\n  };\n\n  const formatInterval = (months) => {\n    let output = '';\n\n    if (months === 0) return 'Less than a month';\n\n    if (months >= 12) {\n      output += Math.floor(months / 12);\n      output += ' year';\n      if (Math.floor(months / 12) !== 1) output += 's';\n    }\n\n    if (months % 12 !== 0) {\n      if (months >= 12) output += ' ';\n      output += months % 12;\n      output += ' month';\n      if (months % 12 !== 1) output += 's';\n    }\n\n    return output;\n  };\n\n  const calculateMonths = (startDate, endDate, is_current) => {\n    const end = is_current ? new Date() : new Date(endDate);\n    return differenceInMonths(new Date(startDate), end);\n  };\n  const dates = (showInterval = true) => {\n    const startDate = formatDate(item.start_date || item.date_from);\n    const endDate = item.is_current\n      ? 'Present'\n      : formatDate(item.end_date || item.date_to);\n    if (!showInterval) {\n      return `${startDate} - ${endDate}`;\n    }\n    return `${startDate} - ${endDate} (${formatInterval(\n      calculateMonths(\n        item.start_date || item.date_from,\n        item.end_date || item.date_to,\n        item.is_current,\n      ),\n    )})`;\n  };\n  const itemLogo = () => {\n    if (type === 'technologies') {\n      return `<img src=\"https://icon-widget.codersrank.io/api/${encodeURIComponent(\n        item.name,\n      )}\">`;\n    }\n    return type === 'workexperience'\n      ? companyLogo(item.company, item.company_logo)\n      : companyLogo(item.project_title, item.image);\n  };\n  const itemTitle = () => {\n    return type === 'workexperience' ? item.company : item.project_title;\n  };\n  const itemSubtitle = () => {\n    return type === 'workexperience' ? item.title : item.role;\n  };\n  if (type === 'technologies') {\n    // prettier-ignore\n    return /* html */`\n      <div class=\"codersrank-timeline-tooltip-item\">\n        <div class=\"logo\">\n          ${itemLogo()}\n        </div>\n        <div class=\"content\">\n          <div class=\"title\">\n            ${item.name}\n          </div>\n          <div class=\"details\">\n            <div>${dates(true)}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"codersrank-timeline-tooltip-divider\"></div>\n      ${item.items.map((subItem) => renderTooltip(subItem, subItem._type)).join('')}\n    `\n  }\n  // prettier-ignore\n  return /* html */`\n    <div class=\"codersrank-timeline-tooltip-item\">\n      <div class=\"logo\">\n        ${itemLogo()}\n      </div>\n      <div class=\"content\">\n        <div class=\"title\">\n          ${itemTitle()}\n        </div>\n        ${itemSubtitle() ? /* html */`\n        <div class=\"subtitle\">\n          ${itemSubtitle()}\n        </div>\n        ` : ''}\n        <div class=\"details\">\n          <div>${dates(true)}</div>\n          ${item.location ? /* html */`\n          <div>${formatLocation(item)}</div>\n          ` : ''}\n        </div>\n        ${item.description ? /* html */`\n        <div class=\"description\">\n          <div>${sanitizeDescription(item.description)}</div>\n        </div>\n        ` : ''}\n        ${item.highlighted_technologies || item.other_technologies ? /* html */`\n        <div class=\"tags\">\n          ${item.highlighted_technologies.map((tech) => /* html */`\n            <span class=\"tag\"><span class=\"tag-star\">★</span>${tech}</span>\n          `).join('')}\n\n          ${item.other_technologies.map((tech) => /* html */`\n            <span class=\"tag\">${tech}</span>\n          `).join('')}\n        </div>\n      ` : ''}\n      </div>\n    </div>\n  `;\n};\n","import { fetchData } from './shared/fetch-data';\nimport { render } from './shared/render';\nimport { renderError } from './shared/render-error';\nimport { renderLoading } from './shared/render-loading';\nimport { formatData } from './shared/format-data';\nimport { renderTooltip } from './shared/render-tooltip';\n\n// eslint-disable-next-line\nconst COMPONENT_TAG = 'codersrank-timeline';\nconst STATE_IDLE = 0;\nconst STATE_LOADING = 1;\nconst STATE_ERROR = 2;\nconst STATE_SUCCESS = 3;\n\n// eslint-disable-next-line\nconst STYLES = `$_STYLES_$`;\n\n// eslint-disable-next-line\nclass CodersrankTimeline extends HTMLElement {\n  constructor() {\n    super();\n\n    this.shadowEl = this.attachShadow({ mode: 'closed' });\n    this.tempDiv = document.createElement('div');\n\n    this.stylesEl = document.createElement('style');\n    this.stylesEl.textContent = STYLES;\n    this.shadowEl.appendChild(this.stylesEl);\n\n    this.onDocumentClick = this.onDocumentClick.bind(this);\n    this.onWidgetClick = this.onWidgetClick.bind(this);\n\n    this.mounted = false;\n\n    this.state = STATE_IDLE;\n\n    this.data = null;\n  }\n\n  static get observedAttributes() {\n    return ['username', 'type'];\n  }\n\n  get username() {\n    return this.getAttribute('username');\n  }\n\n  set username(value) {\n    this.setAttribute('username', value);\n  }\n\n  get type() {\n    return this.getAttribute('type') || 'workexperience';\n  }\n\n  set type(value) {\n    this.setAttribute('type', value);\n  }\n\n  get branding() {\n    return this.getAttribute('branding') !== 'false';\n  }\n\n  set branding(value) {\n    this.setAttribute('branding', value);\n  }\n\n  render() {\n    const { username, mounted, state, shadowEl, data, type, branding } = this;\n    const ctx = {\n      data,\n      type,\n      branding,\n    };\n\n    if (!username || !mounted) return;\n    if (state === STATE_SUCCESS) {\n      this.tempDiv.innerHTML = render(ctx);\n    } else if (state === STATE_ERROR) {\n      this.tempDiv.innerHTML = renderError(ctx);\n    } else if (state === STATE_IDLE || state === STATE_LOADING) {\n      this.tempDiv.innerHTML = renderLoading(ctx);\n    }\n\n    let widgetEl = shadowEl.querySelector('.codersrank-timeline');\n    if (widgetEl) {\n      widgetEl.parentNode.removeChild(widgetEl);\n    }\n    widgetEl = this.tempDiv.querySelector('.codersrank-timeline');\n    if (!widgetEl) return;\n    this.widgetEl = widgetEl;\n    this.detachEvents();\n    this.attachEvents();\n    shadowEl.appendChild(widgetEl);\n  }\n\n  loadAndRender() {\n    const { username, type } = this;\n    this.state = STATE_LOADING;\n    this.render();\n    fetchData(username, type)\n      .then((items) => {\n        this.emitData(items);\n        this.data = formatData(items, type);\n        this.state = STATE_SUCCESS;\n        this.render();\n      })\n      .catch(() => {\n        this.state = STATE_ERROR;\n        this.render();\n      });\n  }\n\n  tooltipText(id) {\n    let item;\n    this.data.rows.forEach((row) => {\n      row.forEach((el) => {\n        if (el.id === parseInt(id, 10)) item = el;\n      });\n    });\n    if (!item) return '';\n    return renderTooltip(item, this.type);\n  }\n\n  showTooltip(id) {\n    if (!this.data || !id || !this.widgetEl) return;\n\n    const itemEl = this.shadowEl.querySelector(`[data-id=\"${id}\"]`);\n    if (!itemEl) return;\n    const tooltipText = this.tooltipText(id);\n    if (!tooltipText) return;\n\n    this.tempDiv.innerHTML = `\n      <div class=\"codersrank-timeline-tooltip\">\n        <div class=\"codersrank-timeline-tooltip-content\">\n          ${tooltipText}\n        </div>\n        <div class=\"codersrank-timeline-tooltip-angle\"></div>\n      </div>\n    `;\n    const widgetElRect = this.getBoundingClientRect();\n    const itemElRect = itemEl.getBoundingClientRect();\n    const tooltipEl = this.tempDiv.querySelector('.codersrank-timeline-tooltip');\n    const itemLeft =\n      itemElRect.left - widgetElRect.left < 0 ? 0 : itemElRect.left - widgetElRect.left;\n    let itemWidth = itemElRect.width;\n    if (itemElRect.left < 0) {\n      itemWidth = itemElRect.width + itemElRect.left - widgetElRect.left;\n    }\n    if (itemLeft + itemWidth > widgetElRect.width) {\n      itemWidth = widgetElRect.width - itemLeft;\n    }\n    let left = itemLeft + itemWidth / 2;\n    if (left < 0) left = 0;\n    if (left > widgetElRect.width) left = widgetElRect.width;\n\n    tooltipEl.style.left = `${left}px`;\n    tooltipEl.style.top = `${itemElRect.top - widgetElRect.top}px`;\n    tooltipEl.querySelector('.codersrank-timeline-tooltip-angle');\n    this.shadowEl.appendChild(tooltipEl);\n    const tooltipRect = tooltipEl.getBoundingClientRect();\n    if (tooltipRect.top < 0) {\n      tooltipEl.classList.add('codersrank-timeline-tooltip-bottom');\n    }\n  }\n\n  hideTooltip() {\n    if (!this.widgetEl) return;\n    const tooltipEl = this.shadowEl.querySelector('.codersrank-timeline-tooltip');\n    if (!tooltipEl) return;\n    this.shadowEl.removeChild(tooltipEl);\n  }\n\n  onDocumentClick(e) {\n    if (e.target === this) return;\n    this.hideTooltip();\n  }\n\n  onWidgetClick(e) {\n    this.hideTooltip();\n    const targetEl = e.target;\n    const parentEl = targetEl && targetEl.parentElement;\n    let itemEl;\n    if (targetEl.classList && targetEl.classList.contains('codersrank-timeline-item')) {\n      itemEl = targetEl;\n    } else if (\n      parentEl.classList &&\n      parentEl.classList.contains('codersrank-timeline-item')\n    ) {\n      itemEl = parentEl;\n    }\n    if (itemEl) this.showTooltip(itemEl.getAttribute('data-id'));\n  }\n\n  emitData(items = []) {\n    const event = new CustomEvent('data', {\n      detail: { items },\n    });\n    this.dispatchEvent(event);\n  }\n\n  attachEvents() {\n    if (!this.widgetEl) return;\n    document.addEventListener('click', this.onDocumentClick, true);\n    this.widgetEl.addEventListener('click', this.onWidgetClick, true);\n  }\n\n  detachEvents() {\n    if (!this.widgetEl) return;\n    document.removeEventListener('click', this.onDocumentClick, true);\n    this.widgetEl.removeEventListener('click', this.onWidgetClick, true);\n  }\n\n  attributeChangedCallback() {\n    if (!this.mounted) return;\n    this.loadAndRender();\n  }\n\n  connectedCallback() {\n    this.width = this.offsetWidth;\n    this.mounted = true;\n    this.loadAndRender();\n  }\n\n  disconnectedCallback() {\n    this.mounted = false;\n    this.detachEvents();\n  }\n}\n\n// EXPORT\n"],"names":["cache","projects","work_experiences","fetchData","username","type","endpoint","Promise","resolve","all","then","forEach","item","_type","err","console","error","reject","fetch","method","headers","res","json","data","workExperiences","filter","e","start_date","codersRankLogo","render","preloader","branding","rows","years","itemText","end_col","start_col","title","company","project_title","encodeURIComponent","name","map","year","yearIndex","join","length","row","rowIndex","id","renderError","renderLoading","ctx","differenceInMonths","d1","d2","months","getFullYear","getMonth","Math","abs","formatData","items","startDate","endDate","datesOverlap","start1","end1","start2","end2","techItems","addTechItem","tech","start","end","push","end_date","processTechItem","is_current","techStart","Date","techEnd","similarTechs","t","toLowerCase","overlap","otherTech","otherTechStart","otherTechEnd","min","max","sort","a","b","aStart","bStart","techs","highlighted_technologies","setStartDate","d","setMonth","setEndDate","itemStartDate","itemEndDate","itemsWithCols","index","itemStartCol","itemEndCol","getRowIndex","previousItems","slice","indexOf","hasClash","el","getYears","startYear","endYear","i","hashCode","str","hash","charCodeAt","intToRGB","c","toString","toUpperCase","substring","stringToColor","hashedHexNumber","companyLogo","url","iconColor","sanitizeDescription","html","replace","renderTooltip","formatLocation","location","is_remote","formatDate","date","formatter","Intl","DateTimeFormat","month","format","formatInterval","output","floor","calculateMonths","dates","showInterval","date_from","date_to","itemLogo","company_logo","image","itemTitle","itemSubtitle","role","subItem","description","other_technologies","COMPONENT_TAG","STATE_IDLE","STATE_LOADING","STATE_ERROR","STATE_SUCCESS","STYLES","CodersrankTimeline","shadowEl","attachShadow","mode","tempDiv","document","createElement","stylesEl","textContent","appendChild","onDocumentClick","bind","onWidgetClick","mounted","state","innerHTML","widgetEl","querySelector","parentNode","removeChild","detachEvents","attachEvents","loadAndRender","emitData","tooltipText","parseInt","showTooltip","itemEl","widgetElRect","getBoundingClientRect","itemElRect","tooltipEl","itemLeft","left","itemWidth","width","style","top","tooltipRect","classList","add","hideTooltip","target","targetEl","parentEl","parentElement","contains","getAttribute","event","CustomEvent","detail","dispatchEvent","addEventListener","removeEventListener","attributeChangedCallback","connectedCallback","offsetWidth","disconnectedCallback","value","setAttribute","HTMLElement"],"mappings":"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"}