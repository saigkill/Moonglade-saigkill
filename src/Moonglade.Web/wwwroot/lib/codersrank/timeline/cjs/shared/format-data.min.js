/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@codersrank/timeline@0.9.2/cjs/shared/format-data.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";exports.__esModule=!0,exports.formatData=void 0;var _differenceInMonths=require("./difference-in-months");function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_extends.apply(this,arguments)}var formatData=function(t,e){void 0===t&&(t=[]);var n,a,r,o=[],s=[],i=function(t,e,n,a){s.push({name:t,start_date:e,end_date:n,items:[a]})};"technologies"===e&&(t.sort((function(t,e){return(t.start_date?new Date(t.start_date):new Date)-(e.start_date?new Date(e.start_date):new Date)})),t.forEach((function(t){[].concat(t.highlighted_technologies||[]).forEach((function(e){!function(t,e){var n,a=e.start_date,r=e.end_date,o=e.is_current,c=a?new Date(a):new Date,f=r&&!o?new Date(r):new Date,d=s.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}));d.length?(d.forEach((function(t){if(!n){var a,r,o,s,i=t.start_date?new Date(t.start_date):new Date,d=t.end_date?new Date(t.end_date):new Date;r=f,s=d,((a=c)<=(o=i)&&o<=r||a<=s&&s<=r||o<a&&r<s)&&(n=!0,t.start_date=new Date(Math.min(c,i)),t.end_date=new Date(Math.max(f,d)),t.items.push(e))}})),n||i(t,c,f,e)):i(t,c,f,e)}(e,t)}))})),t=s);var c=function(t){void 0===t&&(t=""),(n=new Date(t)).setMonth(0,1)};c(new Date),t.forEach((function(t){var e,r=new Date(t.start_date),o=t.is_current?new Date:new Date(t.end_date);r<n&&c(r),(!a||o>a)&&(void 0===(e=o)&&(e=""),a=new Date(e))}));var f=[];t.forEach((function(t,e){var a=new Date(t.start_date),o=t.is_current?new Date:new Date(t.end_date),s=(0,_differenceInMonths.differenceInMonths)(n,a),i=s+(0,_differenceInMonths.differenceInMonths)(a,o);(!r||i>r)&&(r=i),f.push(_extends({start_col:s,end_col:i,id:e},t))})),f.sort((function(t,e){return t.start_col>e.start_col?1:-1}));var d=function t(e,n){var a=e.start_col;return o[n]&&o[n].slice(0,f.indexOf(e)).filter((function(t){return t.end_col>a})).length>0?t(e,n+=1):n};f.forEach((function(t){var e=d(t,0);o[e]||(o[e]=[]),o[e].push(t)}));return{rows:o,years:function(){var t=n.getFullYear(),e=a.getFullYear(),r=[t];if(e>t)for(var o=1;o<=e-t;o+=1)r.push(t+o);return r}()}};exports.formatData=formatData;
//# sourceMappingURL=/sm/9d7cc1f66a9732d6a557bd593a8b26fde9ea894b96fc83fcff7b1fea8de81182.map