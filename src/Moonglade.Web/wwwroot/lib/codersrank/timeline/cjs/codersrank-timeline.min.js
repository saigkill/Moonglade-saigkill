/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@codersrank/timeline@0.9.2/cjs/codersrank-timeline.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var _fetchData=require("./shared/fetch-data"),_render2=require("./shared/render"),_renderError=require("./shared/render-error"),_renderLoading=require("./shared/render-loading"),_formatData=require("./shared/format-data"),_renderTooltip=require("./shared/render-tooltip");function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(i,t)},_wrapNativeSuper(t)}function _construct(t,e,i){return _construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return i&&_setPrototypeOf(o,i.prototype),o},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var COMPONENT_TAG="codersrank-timeline",STATE_IDLE=0,STATE_LOADING=1,STATE_ERROR=2,STATE_SUCCESS=3,STYLES=":host{--preloader-color:#72a0a8;--year-font-size:12px;--year-opacity:0.5;--year-height:24px;--year-text-color:currentColor;--year-line-color:currentColor;--year-line-opacity:0.25;--col-width:24px;--row-height:36px;--timeline-item-bg-color:#f1f1f1;--timeline-item-text-color:inherit;--timeline-item-font-size:12px;--timeline-item-padding:4px 8px;--timeline-item-border-radius:4px;--tooltip-logo-size:32px;--tooltip-font-size:14px;--tooltip-width:320px;--tooltip-padding:16px;--tooltip-bg-color:#fff;--tooltip-border-radius:4px;--tooltip-text-color:#333;--tooltip-box-shadow:0px 10px 20px rgba(0, 0, 0, 0.1);--tag-border:none;--tag-star-color:#ff9900;--tag-bg-color:rgba(0, 0, 100, 0.075);--tag-font-size:0.85em;--tag-font-weight:bold;--tag-padding:0.35em 0.57em;--tag-margin:0.28em;--tag-border-radius:4px;--tag-text-color:inherit;--branding-text-color:inherit;width:100%;display:block;position:relative}.codersrank-timeline{position:relative}.codersrank-timeline-loading{height:100px}.codersrank-timeline-preloader{position:absolute;left:50%;top:50%;width:32px;height:32px;margin:-16px 0 0 -16px;border:3px solid var(--preloader-color);border-left-color:transparent;border-bottom-color:transparent;border-radius:50%;box-sizing:border-box;-webkit-animation:preloader 1s infinite linear;animation:preloader 1s infinite linear}.codersrank-timeline-wrap{position:relative;overflow:auto;padding-bottom:var(--year-height)}.codersrank-timeline-years{display:flex}.codersrank-timeline-year{font-size:var(--year-font-size);opacity:var(--year-opacity);flex-shrink:0;height:var(--year-height);display:flex;align-items:center;color:var(--year-text-color)}.codersrank-timeline-year>span{padding-left:4px;padding-right:4px;position:-webkit-sticky;position:sticky;left:0}.codersrank-timeline-year-line{position:absolute;top:0;border-left:1px dashed var(--year-line-color);opacity:var(--year-line-opacity);height:100%;z-index:0;margin-left:-2px}.codersrank-timeline-chart{position:relative;z-index:10}.codersrank-timeline-item-wrap{position:absolute}.codersrank-timeline-item{position:absolute;left:2px;top:2px;right:2px;bottom:2px;background-color:var(--timeline-item-bg-color);font-size:var(--timeline-item-font-size);display:flex;align-items:center;border-radius:var(--timeline-item-border-radius);color:var(--timeline-item-text-color);cursor:pointer;transition-duration:.2s}.codersrank-timeline-item:hover{opacity:.8}.codersrank-timeline-item span{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:100%;position:-webkit-sticky;position:sticky;padding:var(--timeline-item-padding);left:0;display:flex;align-items:center}.codersrank-timeline-item span img{width:24px;height:24px;margin-right:4px}.codersrank-timeline-tooltip{text-align:left;position:absolute;background:var(--tooltip-bg-color);transform:translateX(-50%) translateY(-100%);border-radius:var(--tooltip-border-radius);color:var(--tooltip-text-color);box-shadow:var(--tooltip-box-shadow);font-family:var(--font-family);font-size:var(--tooltip-font-size,14px);margin-top:-10px;width:var(--tooltip-width);max-width:80vw;line-height:1.5;z-index:1000}.codersrank-timeline-tooltip-content{max-height:80vh;overflow:auto;padding:var(--tooltip-padding)}.codersrank-timeline-tooltip-angle{width:0px;height:0px;position:absolute;left:50%;top:100%;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid var(--tooltip-bg-color);margin-left:-5px}.codersrank-timeline-tooltip-bottom{transform:translateX(-50%);margin-top:34px}.codersrank-timeline-tooltip-bottom .codersrank-timeline-tooltip-angle{bottom:100%;top:auto;transform:rotate(180deg)}.codersrank-timeline-tooltip-divider{height:1px;background:rgba(0,0,0,.1);margin:16px 0}.codersrank-timeline-tooltip-item+.codersrank-timeline-tooltip-item{margin-top:16px}.codersrank-timeline-tooltip-item{display:flex}.codersrank-timeline-tooltip-item .logo{width:var(--tooltip-logo-size);height:var(--tooltip-logo-size);margin-right:16px;flex-shrink:0}.codersrank-timeline-tooltip-item .logo img,.codersrank-timeline-tooltip-item .logo svg{width:100%}.codersrank-timeline-tooltip-item .content{width:100%;min-width:0;flex-shrink:10}.codersrank-timeline-tooltip-item .title{font-weight:700;font-size:1.25em}.codersrank-timeline-tooltip-item .subtitle{font-weight:700}.codersrank-timeline-tooltip-item .details{opacity:.5}.codersrank-timeline-tooltip-item .description{margin:.5em 0}.codersrank-timeline-tooltip-item .tags{margin-top:.5em;display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-start}.codersrank-timeline-tooltip-item .tag{display:inline-flex;padding:var(--tag-padding);font-size:var(--tag-font-size);background:var(--tag-bg-color);border-radius:var(--tag-border-radius);font-weight:var(--tag-font-weight);line-height:1;margin-right:var(--tag-margin);margin-bottom:var(--tag-margin);border:var(--tag-border);color:var(--tag-text-color)}.codersrank-timeline-tooltip-item .tag-star{color:var(--tag-star-color);margin-right:4px}.codersrank-timeline-branding{justify-content:flex-end;align-items:center;font-size:12px;color:var(--branding-text-color);display:flex;margin-top:.5em}.codersrank-timeline-branding a{opacity:.5;display:flex;align-items:center;color:inherit;text-decoration:none;transition-duration:.2s;position:relative;z-index:1;transform:translate3d(0,0,0)}.codersrank-timeline-branding a:hover{opacity:1}.codersrank-timeline-branding span{margin-right:4px}.codersrank-timeline-branding svg{height:16px;width:auto}@-webkit-keyframes preloader{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes preloader{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}",CodersrankTimeline=function(t){function e(){var e;return(e=t.call(this)||this).shadowEl=e.attachShadow({mode:"closed"}),e.tempDiv=document.createElement("div"),e.stylesEl=document.createElement("style"),e.stylesEl.textContent=STYLES,e.shadowEl.appendChild(e.stylesEl),e.onDocumentClick=e.onDocumentClick.bind(_assertThisInitialized(e)),e.onWidgetClick=e.onWidgetClick.bind(_assertThisInitialized(e)),e.mounted=!1,e.state=STATE_IDLE,e.data=null,e}_inheritsLoose(e,t);var i=e.prototype;return i.render=function(){var t=this.username,e=this.mounted,i=this.state,r=this.shadowEl,o={data:this.data,type:this.type,branding:this.branding};if(t&&e){i===STATE_SUCCESS?this.tempDiv.innerHTML=(0,_render2.render)(o):i===STATE_ERROR?this.tempDiv.innerHTML=(0,_renderError.renderError)(o):i!==STATE_IDLE&&i!==STATE_LOADING||(this.tempDiv.innerHTML=(0,_renderLoading.renderLoading)(o));var n=r.querySelector(".codersrank-timeline");n&&n.parentNode.removeChild(n),(n=this.tempDiv.querySelector(".codersrank-timeline"))&&(this.widgetEl=n,this.detachEvents(),this.attachEvents(),r.appendChild(n))}},i.loadAndRender=function(){var t=this,e=this.username,i=this.type;this.state=STATE_LOADING,this.render(),(0,_fetchData.fetchData)(e,i).then((function(e){t.emitData(e),t.data=(0,_formatData.formatData)(e,i),t.state=STATE_SUCCESS,t.render()})).catch((function(){t.state=STATE_ERROR,t.render()}))},i.tooltipText=function(t){var e;return this.data.rows.forEach((function(i){i.forEach((function(i){i.id===parseInt(t,10)&&(e=i)}))})),e?(0,_renderTooltip.renderTooltip)(e,this.type):""},i.showTooltip=function(t){if(this.data&&t&&this.widgetEl){var e=this.shadowEl.querySelector('[data-id="'+t+'"]');if(e){var i=this.tooltipText(t);if(i){this.tempDiv.innerHTML='\n      <div class="codersrank-timeline-tooltip">\n        <div class="codersrank-timeline-tooltip-content">\n          '+i+'\n        </div>\n        <div class="codersrank-timeline-tooltip-angle"></div>\n      </div>\n    ';var r=this.getBoundingClientRect(),o=e.getBoundingClientRect(),n=this.tempDiv.querySelector(".codersrank-timeline-tooltip"),a=o.left-r.left<0?0:o.left-r.left,l=o.width;o.left<0&&(l=o.width+o.left-r.left),a+l>r.width&&(l=r.width-a);var s=a+l/2;s<0&&(s=0),s>r.width&&(s=r.width),n.style.left=s+"px",n.style.top=o.top-r.top+"px",n.querySelector(".codersrank-timeline-tooltip-angle"),this.shadowEl.appendChild(n),n.getBoundingClientRect().top<0&&n.classList.add("codersrank-timeline-tooltip-bottom")}}}},i.hideTooltip=function(){if(this.widgetEl){var t=this.shadowEl.querySelector(".codersrank-timeline-tooltip");t&&this.shadowEl.removeChild(t)}},i.onDocumentClick=function(t){t.target!==this&&this.hideTooltip()},i.onWidgetClick=function(t){this.hideTooltip();var e,i=t.target,r=i&&i.parentElement;i.classList&&i.classList.contains("codersrank-timeline-item")?e=i:r.classList&&r.classList.contains("codersrank-timeline-item")&&(e=r),e&&this.showTooltip(e.getAttribute("data-id"))},i.emitData=function(t){void 0===t&&(t=[]);var e=new CustomEvent("data",{detail:{items:t}});this.dispatchEvent(e)},i.attachEvents=function(){this.widgetEl&&(document.addEventListener("click",this.onDocumentClick,!0),this.widgetEl.addEventListener("click",this.onWidgetClick,!0))},i.detachEvents=function(){this.widgetEl&&(document.removeEventListener("click",this.onDocumentClick,!0),this.widgetEl.removeEventListener("click",this.onWidgetClick,!0))},i.attributeChangedCallback=function(){this.mounted&&this.loadAndRender()},i.connectedCallback=function(){this.width=this.offsetWidth,this.mounted=!0,this.loadAndRender()},i.disconnectedCallback=function(){this.mounted=!1,this.detachEvents()},_createClass(e,[{key:"username",get:function(){return this.getAttribute("username")},set:function(t){this.setAttribute("username",t)}},{key:"type",get:function(){return this.getAttribute("type")||"workexperience"},set:function(t){this.setAttribute("type",t)}},{key:"branding",get:function(){return"false"!==this.getAttribute("branding")},set:function(t){this.setAttribute("branding",t)}}],[{key:"observedAttributes",get:function(){return["username","type"]}}]),e}(_wrapNativeSuper(HTMLElement));module.exports=CodersrankTimeline;
//# sourceMappingURL=/sm/a61a016c62d69bb1c5aeacd4cf3607c904e703a7e8950f21d698c9bfb4a02f9d.map