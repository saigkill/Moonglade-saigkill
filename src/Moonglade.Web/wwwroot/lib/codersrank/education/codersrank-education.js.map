{"version":3,"file":"codersrank-education.js.map","sources":["../src/shared/fetch-data.js","../src/shared/format-data.js","../src/shared/codersrank-logo.js","../src/shared/sanitize-description.js","../src/shared/render.js","../src/shared/render-error.js","../src/shared/render-loading.js","../src/codersrank-education.js"],"sourcesContent":["const cache = {};\n\nconst fetchEducation = (username) => {\n  if (cache[username] && cache[username].education)\n    return Promise.resolve(cache[username].education);\n  return fetch(`https://api.codersrank.io/v2/users/${username}/education`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      if (!cache[username]) cache[username] = {};\n      cache[username].education = data.education;\n      return data.education;\n    })\n    .catch((err) => {\n      // eslint-disable-next-line\n      console.error(err);\n      return Promise.reject(err);\n    });\n};\nconst fetchCertificates = (username) => {\n  if (cache[username] && cache[username].certificates)\n    return Promise.resolve(cache[username].certificates);\n\n  return fetch(`https://api.codersrank.io/v2/users/${username}/certificates`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      if (!cache[username]) cache[username] = {};\n      cache[username].certificates = data.certificates;\n      return data.certificates;\n    })\n    .catch((err) => {\n      // eslint-disable-next-line\n      console.error(err);\n      return Promise.reject(err);\n    });\n};\n\nexport const fetchData = (username) => {\n  return Promise.all([fetchEducation(username), fetchCertificates(username)]).then(\n    ([education, certificates]) => {\n      return Promise.resolve({ education, certificates });\n    },\n  );\n};\n","export const formatData = (data = { education: [], certificates: [] }, maxItems) => {\n  let education = data.education || [];\n  let certificates = data.certificates || [];\n  if (maxItems) {\n    education = education.slice(0, maxItems);\n    certificates = certificates.slice(0, maxItems);\n  }\n  return { education, certificates };\n};\n","export const codersRankLogo = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"258\" height=\"39\" viewBox=\"0 0 258 39\"><path fill=\"#19223C\" d=\"M71.358 27.687A8.076 8.076 0 0 1 69 21.999c0-2.122.846-4.162 2.358-5.687a8.022 8.022 0 0 1 2.664-1.688 8.175 8.175 0 0 1 3.126-.543 8.298 8.298 0 0 1 4.723 1.339 7.155 7.155 0 0 1 2.895 3.791H80.12a3 3 0 0 0-1.182-1.283 3.106 3.106 0 0 0-1.713-.427 4.128 4.128 0 0 0-1.694.264 4.046 4.046 0 0 0-1.43.926 5.197 5.197 0 0 0-1.133 3.234c0 1.17.399 2.309 1.134 3.234.403.405.89.72 1.43.926a4.128 4.128 0 0 0 1.693.264c.586.039 1.17-.087 1.684-.364a3.01 3.01 0 0 0 1.211-1.198h4.571a7.156 7.156 0 0 1-2.895 3.792 8.298 8.298 0 0 1-4.723 1.338 8.173 8.173 0 0 1-3.085-.557 8.02 8.02 0 0 1-2.629-1.673zM88.652 27.687a8.076 8.076 0 0 1-2.359-5.688c0-2.122.846-4.162 2.359-5.687a8.57 8.57 0 0 1 5.79-2.238c2.15 0 4.221.8 5.79 2.238a8.076 8.076 0 0 1 2.358 5.687 8.076 8.076 0 0 1-2.359 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 98.623 22c0-1.17-.4-2.308-1.134-3.234a4.398 4.398 0 0 0-3.048-1.219c-1.14 0-2.234.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.048-1.219zM110.592 14.304a9.126 9.126 0 0 1 6.247 2.156 7.73 7.73 0 0 1 1.8 2.546 7.573 7.573 0 0 1 0 6.06 7.73 7.73 0 0 1-1.8 2.546 9.049 9.049 0 0 1-6.247 2.156h-5.561V14.304h5.561zm-1.752 12.64h1.752a4.596 4.596 0 0 0 1.903-.295 4.504 4.504 0 0 0 1.602-1.044 4.909 4.909 0 0 0 1.295-3.569 4.909 4.909 0 0 0-1.295-3.568 4.504 4.504 0 0 0-1.602-1.044 4.595 4.595 0 0 0-1.903-.294h-1.752v9.813zM131.313 14.23v2.9h-5.714v3.345h5.104v2.9H125.6v3.568h5.714v2.9h-9.599V14.23zM138.55 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32h-4.418l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM155.158 17.055a1.86 1.86 0 0 0-1.22.372c-.159.138-.284.311-.363.505-.08.193-.111.402-.093.61a1.528 1.528 0 0 0 .457 1.115c.32.31.712.539 1.143.67l1.523.445 1.676.52 1.524.744c.487.317.881.753 1.143 1.264.31.6.466 1.262.457 1.933a4.227 4.227 0 0 1-.45 1.859 4.333 4.333 0 0 1-1.226 1.487 6.424 6.424 0 0 1-4.343 1.412 6.899 6.899 0 0 1-4.342-1.263 4.331 4.331 0 0 1-1.278-1.588 4.223 4.223 0 0 1-.398-1.981h4.114c-.012.253.032.507.128.742.097.236.244.449.431.625a1.87 1.87 0 0 0 1.421.492c.475.02.94-.14 1.296-.447a1.382 1.382 0 0 0 .457-1.115 1.455 1.455 0 0 0-.457-1.115 2.986 2.986 0 0 0-1.143-.669l-1.524-.446-1.676-.52-1.523-.744a3.148 3.148 0 0 1-1.143-1.264 4 4 0 0 1-.305-1.859 4.15 4.15 0 0 1 .407-1.944 4.258 4.258 0 0 1 1.27-1.55 6.582 6.582 0 0 1 4.19-1.338 6.982 6.982 0 0 1 4.113 1.115 4.33 4.33 0 0 1 1.278 1.588c.292.62.428 1.299.398 1.98h-4.19a2.056 2.056 0 0 0-.533-1.263 1.611 1.611 0 0 0-1.22-.372zM168.261 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32H172.3l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM189.592 29.768l-.914-2.602h-5.714l-.914 2.602h-4.114l5.485-15.538h4.723l5.485 15.538h-4.037zm-5.638-5.501h3.733l-1.828-5.428-1.905 5.428zM205.972 14.23h3.885v15.538h-3.885l-6.476-9.813v9.813h-3.885V14.23h3.885l6.476 9.814zM217.093 29.768h-3.885V14.304h3.885v6.766l5.257-6.766h5.104l-6.552 7.732 6.552 7.732h-4.952l-5.333-6.84zM232.863 27.761a1.98 1.98 0 0 1-.5 1.253 2.07 2.07 0 0 1-1.197.664 2.1 2.1 0 0 1-1.359-.222 2.024 2.024 0 0 1-.91-1.01 1.962 1.962 0 0 1-.054-1.342c.141-.44.433-.82.827-1.076a2.096 2.096 0 0 1 2.583.246c.201.194.359.426.464.682.105.256.154.53.146.805z\"></path> <path fill=\"#67a4ac\" d=\"M235.301 29.768V14.304h3.885v15.464zM244.062 27.687a8.076 8.076 0 0 1-2.358-5.688c0-2.122.846-4.162 2.358-5.687a8.57 8.57 0 0 1 5.79-2.238c2.151 0 4.222.8 5.79 2.238A8.076 8.076 0 0 1 258 21.999a8.076 8.076 0 0 1-2.358 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 254.033 22c0-1.17-.399-2.308-1.134-3.234a4.398 4.398 0 0 0-3.047-1.219c-1.14 0-2.235.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.047-1.219z\"></path> <path d=\"M33.25.054L2.147 19.634C.682 20.52-.034 21.512.001 22.611v2.98c.035 1.1.768 2.075 2.2 2.926l15.393 8.885a.726.726 0 0 0 1.047-.373l3.456-8.352-7.33-4.15a1.317 1.317 0 0 1-.514-.477 1.346 1.346 0 0 1 .461-1.864l13.457-8.247L33.72.427a.324.324 0 0 0-.103-.36.31.31 0 0 0-.369-.013z\" fill=\"#19223c\"></path> <path d=\"M58.8 10.961L43.618 1.757a.726.726 0 0 0-1.047.32l-3.56 8.352 7.225 4.31c.208.113.381.282.502.488a1.347 1.347 0 0 1 0 1.363 1.318 1.318 0 0 1-.502.49l-13.561 7.98-5.76 13.407a.323.323 0 0 0 .026.452.312.312 0 0 0 .445-.026l9.949-6.012 3.927 5.64a.947.947 0 0 0 .785.425h9.425a.932.932 0 0 0 .832-.506.97.97 0 0 0-.047-.984l-6.388-9.79 12.933-7.82c1.466-.887 2.199-1.88 2.199-2.98V13.94c0-1.1-.733-2.092-2.2-2.979z\" fill=\"#67a4ac\"></path></svg>`;\n","export const sanitizeDescription = (html = '') => {\n  return (html || '').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n/g, '<br>');\n};\n","import { codersRankLogo } from './codersrank-logo';\nimport { sanitizeDescription } from './sanitize-description';\n\nexport const render = ({\n  data: { education = [], certificates = [] },\n  grid,\n  preloader,\n  education: showEducation,\n  certificates: showCertificates,\n  certificationLink,\n  certificationLinkText,\n  educationSectionTitle,\n  certificatesSectionTitle,\n  branding,\n} = {}) => {\n  const formatDate = (date) => {\n    if (!date) return '';\n    const formatter = Intl.DateTimeFormat('en', { month: 'short', year: 'numeric' });\n    return formatter.format(new Date(date));\n  };\n\n  const dates = (item) => {\n    const startDate = formatDate(item.start_date || item.date_from);\n    const endDate = item.is_current\n      ? 'Present'\n      : formatDate(item.end_date || item.date_to);\n    return `${startDate} - ${endDate}`;\n  };\n\n  // prettier-ignore\n  return /* html */ `\n    <div class=\"codersrank-education ${preloader ? 'codersrank-education-loading' : ''}\">\n      ${preloader ? /* html */ `\n      <div class=\"codersrank-education-preloader\"></div>\n      ` : ''}\n      ${education.length > 0 && showEducation ? /* html */`\n\n      ${educationSectionTitle ? /* html */`\n      <div class=\"codersrank-education-section-title\">${educationSectionTitle}</div>\n      ` : ''}\n      <ul ${grid ? 'class=\"codersrank-education-grid\"' : ''}>\n        ${education.map((item) => /* html */`\n        <li class=\"codersrank-education-item\">\n            ${item.name ? /* html */`\n            <div class=\"codersrank-education-title\">\n              ${ item.name }\n            </div>\n            ` : ''}\n\n            ${item.degree || item.field_of_study ? /* html */`\n            <div class=\"codersrank-education-details\">\n              ${ [item.degree, item.field_of_study].filter((el) => !!el).join(', ') }\n            </div>\n            ` : ''}\n\n            ${dates(item) ? /* html */`\n            <div class=\"codersrank-education-date\">\n              ${ dates(item) }\n            </div>\n            ` : ''}\n\n            ${item.description ? /* html */`\n            <div class=\"codersrank-education-description\">\n              ${ sanitizeDescription(item.description) }\n            </div>\n            ` : ''}\n        </li>\n        `).join('')}\n      </ul>\n      ` : ''}\n      ${certificates.length > 0 && showCertificates ? /* html */`\n      ${certificatesSectionTitle ? /* html */`\n      <div class=\"codersrank-education-section-title\">${certificatesSectionTitle}</div>\n      ` : ''}\n      <ul ${grid ? 'class=\"codersrank-education-grid\"' : ''}>\n        ${certificates.map((item) => /* html */`\n        <li class=\"codersrank-education-item\">\n            ${item.organization ? /* html */`\n            <div class=\"codersrank-education-title\">\n              ${ item.organization }\n            </div>\n            ` : ''}\n\n            ${item.name ? /* html */`\n            <div class=\"codersrank-education-details\">\n              ${ item.name }\n            </div>\n            ` : ''}\n\n            ${item.date ? /* html */`\n            <div class=\"codersrank-education-date\">\n              ${ formatDate(item.date) }\n            </div>\n            ` : ''}\n\n            ${item.certificationID ? /* html */`\n            <div class=\"codersrank-education-description\">\n              ${ item.certificationID }\n            </div>\n            ` : ''}\n            ${item.certificationURL && certificationLink ? /* html */`\n            <div class=\"codersrank-education-certificate-link\">\n              <a href=\"${item.certificationURL}\" target=\"_blank\" rel=\"noopener noreferrer\">${ certificationLinkText }</a>\n            </div>\n            ` : ''}\n        </li>\n        `).join('')}\n      </ul>\n      ` : ''}\n      ${branding ? /* html */`\n      <div class=\"codersrank-education-branding\">\n        <a href=\"https://codersrank.io\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <span>Powered by </span>\n          ${codersRankLogo}\n        </a>\n      </div>\n      ` : ''}\n    </div>\n  `;\n};\n","export const renderError = () => {\n  return '';\n};\n","import { render } from './render';\n\nexport const renderLoading = (ctx) => {\n  return render({\n    ...ctx,\n    preloader: true,\n    data: [],\n  });\n};\n","import { fetchData } from './shared/fetch-data';\nimport { formatData } from './shared/format-data';\nimport { render } from './shared/render';\nimport { renderError } from './shared/render-error';\nimport { renderLoading } from './shared/render-loading';\n\n// eslint-disable-next-line\nconst COMPONENT_TAG = 'codersrank-education';\nconst STATE_IDLE = 0;\nconst STATE_LOADING = 1;\nconst STATE_ERROR = 2;\nconst STATE_SUCCESS = 3;\n\n// eslint-disable-next-line\nconst STYLES = `$_STYLES_$`;\n\n// eslint-disable-next-line\nclass CodersrankEducation extends HTMLElement {\n  constructor() {\n    super();\n\n    this.shadowEl = this.attachShadow({ mode: 'closed' });\n    this.tempDiv = document.createElement('div');\n\n    this.stylesEl = document.createElement('style');\n    this.stylesEl.textContent = STYLES;\n    this.shadowEl.appendChild(this.stylesEl);\n\n    this.mounted = false;\n\n    this.state = STATE_IDLE;\n\n    this.data = null;\n  }\n\n  static get observedAttributes() {\n    return ['username', 'grid', 'max-items'];\n  }\n\n  get username() {\n    return this.getAttribute('username');\n  }\n\n  set username(value) {\n    this.setAttribute('username', value);\n  }\n\n  get grid() {\n    const grid = this.getAttribute('grid');\n    if (grid === 'true' || grid === '') return true;\n    return false;\n  }\n\n  set grid(value) {\n    this.setAttribute('grid', value);\n  }\n\n  get maxItems() {\n    const maxItems = parseInt(this.getAttribute('max-items') || 0, 10) || 0;\n    return maxItems;\n  }\n\n  set maxItems(value) {\n    this.setAttribute('max-items', value);\n  }\n\n  set ['max-items'](value) {\n    this.setAttribute('max-items', value);\n  }\n\n  get education() {\n    return this.getAttribute('education') !== 'false';\n  }\n\n  set education(value) {\n    this.setAttribute('education', value);\n  }\n\n  get certificates() {\n    return this.getAttribute('certificates') !== 'false';\n  }\n\n  set certificates(value) {\n    this.setAttribute('certificates', value);\n  }\n\n  get certificateLinkText() {\n    return this.getAttribute('certificate-link-text') || 'See certification';\n  }\n\n  set certificateLinkText(value) {\n    this.setAttribute('certificate-link-text', value);\n  }\n\n  set ['certificate-link-text'](value) {\n    this.setAttribute('certificate-link-text', value);\n  }\n\n  get certificateLink() {\n    return this.getAttribute('certificate-link') !== 'false';\n  }\n\n  set certificateLink(value) {\n    this.setAttribute('certificate-link', value);\n  }\n\n  set ['certificate-link'](value) {\n    this.setAttribute('certificate-link', value);\n  }\n\n  get educationSectionTitle() {\n    return this.getAttribute('education-section-title') || '';\n  }\n\n  set educationSectionTitle(value) {\n    this.setAttribute('education-section-title', value);\n  }\n\n  set ['education-section-title'](value) {\n    this.setAttribute('education-section-title', value);\n  }\n\n  get certificatesSectionTitle() {\n    return this.getAttribute('certificates-section-title') || '';\n  }\n\n  set certificatesSectionTitle(value) {\n    this.setAttribute('certificates-section-title', value);\n  }\n\n  set ['certificates-section-title'](value) {\n    this.setAttribute('certificates-section-title', value);\n  }\n\n  get branding() {\n    return this.getAttribute('branding') !== 'false';\n  }\n\n  set branding(value) {\n    this.setAttribute('branding', value);\n  }\n\n  render() {\n    const {\n      username,\n      mounted,\n      state,\n      shadowEl,\n      data,\n      grid,\n      education,\n      certificates,\n      certificateLink,\n      certificateLinkText,\n      educationSectionTitle,\n      certificatesSectionTitle,\n      branding,\n    } = this;\n    const ctx = {\n      data,\n      grid,\n      education,\n      certificates,\n      certificateLink,\n      certificateLinkText,\n      educationSectionTitle,\n      certificatesSectionTitle,\n      branding,\n    };\n\n    if (!username || !mounted) return;\n    if (state === STATE_SUCCESS) {\n      this.tempDiv.innerHTML = render(ctx);\n    } else if (state === STATE_ERROR) {\n      this.tempDiv.innerHTML = renderError(ctx);\n    } else if (state === STATE_IDLE || state === STATE_LOADING) {\n      this.tempDiv.innerHTML = renderLoading(ctx);\n    }\n\n    let widgetEl = shadowEl.querySelector('.codersrank-education');\n    if (widgetEl) {\n      widgetEl.parentNode.removeChild(widgetEl);\n    }\n    widgetEl = this.tempDiv.querySelector('.codersrank-education');\n    if (!widgetEl) return;\n    this.widgetEl = widgetEl;\n    shadowEl.appendChild(widgetEl);\n  }\n\n  loadAndRender() {\n    const { username } = this;\n    this.state = STATE_LOADING;\n    this.render();\n    fetchData(username)\n      .then((data) => {\n        this.data = formatData(data, this.maxItems);\n        this.state = STATE_SUCCESS;\n        this.render();\n      })\n      .catch(() => {\n        this.state = STATE_ERROR;\n        this.render();\n      });\n  }\n\n  attributeChangedCallback() {\n    if (!this.mounted) return;\n    this.loadAndRender();\n  }\n\n  connectedCallback() {\n    this.mounted = true;\n    this.loadAndRender();\n  }\n\n  disconnectedCallback() {\n    this.mounted = false;\n  }\n}\n\n// EXPORT\n"],"names":["cache","fetchEducation","username","education","Promise","resolve","fetch","method","headers","then","res","json","data","err","console","error","reject","fetchCertificates","certificates","fetchData","all","formatData","maxItems","slice","codersRankLogo","sanitizeDescription","html","replace","render","grid","preloader","showEducation","showCertificates","certificationLink","certificationLinkText","educationSectionTitle","certificatesSectionTitle","branding","formatDate","date","formatter","Intl","DateTimeFormat","month","year","format","Date","dates","item","startDate","start_date","date_from","endDate","is_current","end_date","date_to","length","map","name","degree","field_of_study","filter","el","join","description","organization","certificationID","certificationURL","renderError","renderLoading","ctx","COMPONENT_TAG","STATE_IDLE","STATE_LOADING","STATE_ERROR","STATE_SUCCESS","STYLES","CodersrankEducation","shadowEl","attachShadow","mode","tempDiv","document","createElement","stylesEl","textContent","appendChild","mounted","state","certificateLink","certificateLinkText","innerHTML","widgetEl","querySelector","parentNode","removeChild","loadAndRender","attributeChangedCallback","connectedCallback","disconnectedCallback","getAttribute","value","setAttribute","parseInt","HTMLElement"],"mappings":"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"}