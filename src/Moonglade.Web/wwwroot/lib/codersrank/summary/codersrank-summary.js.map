{"version":3,"file":"codersrank-summary.js.map","sources":["../src/shared/fetch-data.js","../src/shared/codersrank-logo.js","../src/shared/format-score.js","../src/shared/render.js","../src/shared/render-error.js","../src/shared/render-loading.js","../src/shared/dummy-profile.js","../src/shared/format-badges.js","../src/codersrank-summary.js"],"sourcesContent":["const cache = {};\n\nexport const fetchData = (username, id) => {\n  if (cache[username]) return Promise.resolve(cache[username]);\n  if (id && cache[id]) return Promise.resolve(cache[id]);\n\n  let endpoint = `https://api.codersrank.io/v2/users/${username || id}/`;\n  if (id) endpoint += '?get_by=id';\n\n  let badgesEndpoint = `https://api.codersrank.io/v2/users/${username || id}/badges`;\n  if (id) badgesEndpoint += '?get_by=id';\n\n  const getUser = () =>\n    fetch(endpoint, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }).then((res) => res.json());\n\n  const getBadges = () =>\n    fetch(badgesEndpoint, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }).then((res) => res.json());\n\n  return Promise.all([getUser(), getBadges()])\n    .then(([user, badges]) => {\n      // eslint-disable-next-line\n      const data = {\n        ...user,\n        ...badges,\n      };\n      if (id) {\n        cache[id] = data;\n      } else {\n        cache[username] = data;\n      }\n      return data;\n    })\n    .catch((err) => {\n      // eslint-disable-next-line\n      console.error(err);\n      return Promise.reject(err);\n    });\n};\n","export const codersrRankLogo = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"258\" height=\"39\" viewBox=\"0 0 258 39\"><path fill=\"#19223C\" d=\"M71.358 27.687A8.076 8.076 0 0 1 69 21.999c0-2.122.846-4.162 2.358-5.687a8.022 8.022 0 0 1 2.664-1.688 8.175 8.175 0 0 1 3.126-.543 8.298 8.298 0 0 1 4.723 1.339 7.155 7.155 0 0 1 2.895 3.791H80.12a3 3 0 0 0-1.182-1.283 3.106 3.106 0 0 0-1.713-.427 4.128 4.128 0 0 0-1.694.264 4.046 4.046 0 0 0-1.43.926 5.197 5.197 0 0 0-1.133 3.234c0 1.17.399 2.309 1.134 3.234.403.405.89.72 1.43.926a4.128 4.128 0 0 0 1.693.264c.586.039 1.17-.087 1.684-.364a3.01 3.01 0 0 0 1.211-1.198h4.571a7.156 7.156 0 0 1-2.895 3.792 8.298 8.298 0 0 1-4.723 1.338 8.173 8.173 0 0 1-3.085-.557 8.02 8.02 0 0 1-2.629-1.673zM88.652 27.687a8.076 8.076 0 0 1-2.359-5.688c0-2.122.846-4.162 2.359-5.687a8.57 8.57 0 0 1 5.79-2.238c2.15 0 4.221.8 5.79 2.238a8.076 8.076 0 0 1 2.358 5.687 8.076 8.076 0 0 1-2.359 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 98.623 22c0-1.17-.4-2.308-1.134-3.234a4.398 4.398 0 0 0-3.048-1.219c-1.14 0-2.234.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.048-1.219zM110.592 14.304a9.126 9.126 0 0 1 6.247 2.156 7.73 7.73 0 0 1 1.8 2.546 7.573 7.573 0 0 1 0 6.06 7.73 7.73 0 0 1-1.8 2.546 9.049 9.049 0 0 1-6.247 2.156h-5.561V14.304h5.561zm-1.752 12.64h1.752a4.596 4.596 0 0 0 1.903-.295 4.504 4.504 0 0 0 1.602-1.044 4.909 4.909 0 0 0 1.295-3.569 4.909 4.909 0 0 0-1.295-3.568 4.504 4.504 0 0 0-1.602-1.044 4.595 4.595 0 0 0-1.903-.294h-1.752v9.813zM131.313 14.23v2.9h-5.714v3.345h5.104v2.9H125.6v3.568h5.714v2.9h-9.599V14.23zM138.55 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32h-4.418l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM155.158 17.055a1.86 1.86 0 0 0-1.22.372c-.159.138-.284.311-.363.505-.08.193-.111.402-.093.61a1.528 1.528 0 0 0 .457 1.115c.32.31.712.539 1.143.67l1.523.445 1.676.52 1.524.744c.487.317.881.753 1.143 1.264.31.6.466 1.262.457 1.933a4.227 4.227 0 0 1-.45 1.859 4.333 4.333 0 0 1-1.226 1.487 6.424 6.424 0 0 1-4.343 1.412 6.899 6.899 0 0 1-4.342-1.263 4.331 4.331 0 0 1-1.278-1.588 4.223 4.223 0 0 1-.398-1.981h4.114c-.012.253.032.507.128.742.097.236.244.449.431.625a1.87 1.87 0 0 0 1.421.492c.475.02.94-.14 1.296-.447a1.382 1.382 0 0 0 .457-1.115 1.455 1.455 0 0 0-.457-1.115 2.986 2.986 0 0 0-1.143-.669l-1.524-.446-1.676-.52-1.523-.744a3.148 3.148 0 0 1-1.143-1.264 4 4 0 0 1-.305-1.859 4.15 4.15 0 0 1 .407-1.944 4.258 4.258 0 0 1 1.27-1.55 6.582 6.582 0 0 1 4.19-1.338 6.982 6.982 0 0 1 4.113 1.115 4.33 4.33 0 0 1 1.278 1.588c.292.62.428 1.299.398 1.98h-4.19a2.056 2.056 0 0 0-.533-1.263 1.611 1.611 0 0 0-1.22-.372zM168.261 23.746v6.022h-3.885V14.304h6.247a6.19 6.19 0 0 1 4.266 1.413c.486.418.874.933 1.137 1.51.263.578.395 1.204.387 1.836a4.752 4.752 0 0 1-.838 2.602 4.578 4.578 0 0 1-2.743 1.784l3.885 6.32H172.3l-3.58-6.023h-.458zm0-6.616v3.717h2.362c.253.01.505-.03.742-.12.236-.09.45-.226.63-.4.175-.178.312-.388.404-.617.091-.23.135-.475.128-.722a1.819 1.819 0 0 0-.128-.721 1.854 1.854 0 0 0-.405-.617 1.833 1.833 0 0 0-.63-.4 1.87 1.87 0 0 0-.741-.12h-2.362zM189.592 29.768l-.914-2.602h-5.714l-.914 2.602h-4.114l5.485-15.538h4.723l5.485 15.538h-4.037zm-5.638-5.501h3.733l-1.828-5.428-1.905 5.428zM205.972 14.23h3.885v15.538h-3.885l-6.476-9.813v9.813h-3.885V14.23h3.885l6.476 9.814zM217.093 29.768h-3.885V14.304h3.885v6.766l5.257-6.766h5.104l-6.552 7.732 6.552 7.732h-4.952l-5.333-6.84zM232.863 27.761a1.98 1.98 0 0 1-.5 1.253 2.07 2.07 0 0 1-1.197.664 2.1 2.1 0 0 1-1.359-.222 2.024 2.024 0 0 1-.91-1.01 1.962 1.962 0 0 1-.054-1.342c.141-.44.433-.82.827-1.076a2.096 2.096 0 0 1 2.583.246c.201.194.359.426.464.682.105.256.154.53.146.805z\"></path> <path fill=\"#67a4ac\" d=\"M235.301 29.768V14.304h3.885v15.464zM244.062 27.687a8.076 8.076 0 0 1-2.358-5.688c0-2.122.846-4.162 2.358-5.687a8.57 8.57 0 0 1 5.79-2.238c2.151 0 4.222.8 5.79 2.238A8.076 8.076 0 0 1 258 21.999a8.076 8.076 0 0 1-2.358 5.688 8.491 8.491 0 0 1-5.79 2.266 8.491 8.491 0 0 1-5.79-2.266zm8.837-2.454A5.197 5.197 0 0 0 254.033 22c0-1.17-.399-2.308-1.134-3.234a4.398 4.398 0 0 0-3.047-1.219c-1.14 0-2.235.438-3.047 1.22a5.197 5.197 0 0 0-1.134 3.233c0 1.171.399 2.309 1.134 3.234a4.398 4.398 0 0 0 3.047 1.219c1.14 0 2.235-.438 3.047-1.219z\"></path> <path d=\"M33.25.054L2.147 19.634C.682 20.52-.034 21.512.001 22.611v2.98c.035 1.1.768 2.075 2.2 2.926l15.393 8.885a.726.726 0 0 0 1.047-.373l3.456-8.352-7.33-4.15a1.317 1.317 0 0 1-.514-.477 1.346 1.346 0 0 1 .461-1.864l13.457-8.247L33.72.427a.324.324 0 0 0-.103-.36.31.31 0 0 0-.369-.013z\" fill=\"#19223c\"></path> <path d=\"M58.8 10.961L43.618 1.757a.726.726 0 0 0-1.047.32l-3.56 8.352 7.225 4.31c.208.113.381.282.502.488a1.347 1.347 0 0 1 0 1.363 1.318 1.318 0 0 1-.502.49l-13.561 7.98-5.76 13.407a.323.323 0 0 0 .026.452.312.312 0 0 0 .445-.026l9.949-6.012 3.927 5.64a.947.947 0 0 0 .785.425h9.425a.932.932 0 0 0 .832-.506.97.97 0 0 0-.047-.984l-6.388-9.79 12.933-7.82c1.466-.887 2.199-1.88 2.199-2.98V13.94c0-1.1-.733-2.092-2.2-2.979z\" fill=\"#67a4ac\"></path></svg>`;\n","function round(num) {\n  return Math.round(num * 10) / 10;\n}\n\nconst formatter =\n  window.Intl && window.Intl.NumberFormat\n    ? Intl.NumberFormat('en', { minimumFractionDigits: 1 })\n    : {\n        format(num) {\n          return num;\n        },\n      };\n\nexport function formatScore(score) {\n  return formatter.format ? formatter.format(round(score)) : round(score);\n}\n","/* eslint-disable camelcase */\nimport { codersrRankLogo } from './codersrank-logo';\nimport { formatScore } from './format-score';\n\nexport const render = ({\n  data,\n  username,\n  layout,\n  badgesData,\n  badgesLayout,\n  showAvatar,\n  showHeader,\n  loading,\n  branding,\n} = {}) => {\n  const isNotRegistered =\n    data && (data.status === 'not_found' || data.status === 'generated');\n  const isPlaceholder = loading || isNotRegistered;\n  const { first_name, last_name, avatar_url, total_users, position, total_score } = data;\n  if (isNotRegistered) return '';\n  const fullName = [first_name, last_name].filter((l) => !!l).join(' ');\n\n  const percentage = Math.min(\n    Math.max(Math.ceil((position / total_users) * 100), 1),\n    100,\n  );\n  const tag = loading || isNotRegistered ? 'div' : 'a';\n  const linkAttrs =\n    loading || isNotRegistered\n      ? ''\n      : `href=\"https://profile.codersrank.io/user/${username}?utm_source=users&utm_medium=banner&utm_campaign=embedded_widget\" rel=\"noreferrer noopener\" target=\"_blank\" title=\"Visit ${username}'s CodersRank profile\"`;\n\n  const badgeSeniorityLabel = (label) => {\n    return label\n      .split('')\n      .map((char, index) => {\n        if (char === char.toUpperCase() && index !== 0) return ` ${char}`;\n        return char;\n      })\n      .join('');\n  };\n  const badgeStreakLabel = (label) => {\n    return label\n      .split('')\n      .map((char, index) => {\n        if (char === char.toUpperCase() && index !== 0) return ` ${char}`;\n        return char;\n      })\n      .join('');\n  };\n\n  // prettier-ignore\n  const renderBadge = (badge) => {\n    if (badge.version === 'v1') {\n      return /* html */`\n        <div class=\"codersrank-summary-badge codersrank-summary-badge-v1\">\n          <div class=\"codersrank-summary-badge-rank\">Top ${badge.rank}</div>\n          <div class=\"codersrank-summary-badge-technology\">\n            <div class=\"codersrank-summary-badge-technology-logo\">\n              <img src=\"https://icon-widget.codersrank.io/api/${encodeURIComponent(badge.language)}\"/>\n            </div>\n            <span class=\"codersrank-summary-badge-name\">${badge.language}</span>\n          </div>\n          <div class=\"codersrank-summary-badge-location\">${badge.location}</div>\n        </div>\n      `;\n    }\n    if (badge.version === 'v2' && badge.badgeFamily === 'Seniority') {\n      return /* html */`\n        <div class=\"codersrank-summary-badge codersrank-summary-badge-v2 codersrank-summary-badge-${badge.badgeFamily.toLowerCase()}\">\n          <div class=\"codersrank-summary-badge-image\">\n            <img src=\"https://profile.codersrank.io/static/badgesV2/${badge.badgeFamily}/${badge.badgeType}.svg\" />\n          </div>\n          <div class=\"codersrank-summary-badge-label\">${badgeSeniorityLabel(badge.badgeType)}</div>\n          <div class=\"codersrank-summary-badge-technology\">\n            <div class=\"codersrank-summary-badge-technology-logo\">\n              <img src=\"https://icon-widget.codersrank.io/api/${encodeURIComponent(badge.language)}\"/>\n            </div>\n            <span class=\"codersrank-summary-badge-name\">${badge.language}</span>\n          </div>\n        </div>\n      `;\n    }\n    if (badge.version === 'v2' && badge.badgeFamily === 'Streak') {\n      return /* html */`\n        <div class=\"codersrank-summary-badge codersrank-summary-badge-v2 codersrank-summary-badge-${badge.badgeFamily.toLowerCase()}\">\n          <div class=\"codersrank-summary-badge-image\">\n            <img src=\"https://profile.codersrank.io/static/badgesV2/${badge.badgeFamily}/${badge.badgeType}.svg\" />\n          </div>\n          <div class=\"codersrank-summary-badge-days\">days</div>\n          <div class=\"codersrank-summary-badge-label\">${badgeStreakLabel(badge.badgeType)}</div>\n        </div>\n      `;\n    }\n    return '';\n  }\n\n  // prettier-ignore\n  return /* html */`\n    <${tag} ${linkAttrs} class=\"codersrank-summary codersrank-summary-${layout} codersrank-summary-badges-${badgesLayout} ${isPlaceholder ? ' codersrank-summary-placeholder' : ''}\">\n    ${loading ? `<div class=\"codersrank-summary-preloader\"></div>` : ''}\n    ${!loading && isNotRegistered ? `\n      <div class=\"codersrank-summary-not-found\">User not found</div>\n    ` : ''}\n    ${showHeader ? /* html */ `\n    <div class=\"codersrank-summary-head${!badgesData.length ? ' codersrank-summary-head-only' : ''}\">\n      ${showAvatar ? /* html */ `\n      <div class=\"codersrank-summary-avatar\" ${avatar_url ? `style=\"background-image: url(${avatar_url})\"` : ''}></div>\n      ` : ''}\n      <div class=\"codersrank-summary-head-content\">\n        <div class=\"codersrank-summary-head-name\">${fullName || username}</div>\n        <div class=\"codersrank-summary-head-rank\"><b>Top ${percentage}%</b> in Worldwide</div>\n        <div class=\"codersrank-summary-head-rank\"><b>${formatScore(total_score)}</b> CodersRank score</div>\n      </div>\n    </div>\n    ` : ''}\n    ${badgesData.length ? /* html */`\n    <div class=\"codersrank-summary-badges\">\n      ${badgesData.map(renderBadge).join('')}\n    </div>\n    ` : ''}\n  </${tag}>\n  ${branding ? /* html */`\n  <div class=\"codersrank-summary-branding\">\n    <a href=\"https://codersrank.io\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <span>Powered by </span>\n      ${codersrRankLogo}\n    </a>\n  </div>\n  ` : ''}\n`;\n};\n","export const renderError = () => {\n  return '';\n};\n","import { render } from './render';\n\nexport const renderLoading = (ctx) => {\n  return render({\n    ...ctx,\n    loading: true,\n  });\n};\n","export const dummyProfile = {\n  first_name: 'Placeholder',\n  last_name: 'Name',\n  avatar_url: '',\n  country: 'Placeholder',\n  total_users: 100,\n  position: 1,\n  total_score: 5000,\n  badges: [\n    {\n      language: 'HTML',\n      visibility: 'highlighted',\n      rank: 1,\n      location_name: 'World',\n      version: 'v1',\n    },\n    {\n      language: 'JavaScript',\n      visibility: 'highlighted',\n      rank: 1,\n      location_name: 'World',\n      version: 'v1',\n    },\n    {\n      language: 'CSS',\n      visibility: 'highlighted',\n      rank: 1,\n      location_name: 'World',\n      version: 'v1',\n    },\n  ],\n};\n","import { dummyProfile } from './dummy-profile';\n\nexport const formatBadges = ({ data: profileData, badges: maxBadges, loading }) => {\n  let data = profileData || dummyProfile;\n  if (loading) {\n    data = dummyProfile;\n  }\n\n  /* eslint-disable */\n  const result = (data.badges || [])\n    .filter((badge) => badge.visibility === 'highlighted')\n    .map(\n      ({ language, rank, location_name, version, badgeFamily, badgeType, values }) => ({\n        language: language || values.language,\n        rank,\n        location: location_name,\n        version,\n        badgeFamily,\n        badgeType,\n      }),\n    )\n    .slice(0, maxBadges);\n  /* eslint-enable */\n  result.sort((a, b) => {\n    if (b.version === 'v1' && a.version === 'v2') return -1;\n    return 0;\n  });\n  const filtered = result.filter((badge) => {\n    if (badge.version === 'v2') {\n      return badge.badgeFamily === 'Seniority' || badge.badgeFamily === 'Streak';\n    }\n    return true;\n  });\n  return filtered;\n};\n","/* eslint-disable max-classes-per-file */\nimport { fetchData } from './shared/fetch-data';\nimport { render } from './shared/render';\nimport { renderError } from './shared/render-error';\nimport { renderLoading } from './shared/render-loading';\nimport { formatBadges } from './shared/format-badges';\nimport { dummyProfile } from './shared/dummy-profile';\n\n// eslint-disable-next-line\nconst STATE_IDLE = 0;\nconst STATE_LOADING = 1;\nconst STATE_ERROR = 2;\nconst STATE_SUCCESS = 3;\n\nconst BADGE_WIDE_WIDTH = 380;\n\n// eslint-disable-next-line\nconst STYLES = `$_STYLES_$`;\n\n// eslint-disable-next-line\nclass CodersrankSummary extends HTMLElement {\n  constructor() {\n    super();\n\n    this.shadowEl = this.attachShadow({ mode: 'closed' });\n    this.tempDiv = document.createElement('div');\n\n    this.stylesEl = document.createElement('style');\n    this.stylesEl.textContent = STYLES;\n    this.shadowEl.appendChild(this.stylesEl);\n\n    this.onResize = this.onResize.bind(this);\n\n    this.mounted = false;\n\n    this.state = STATE_IDLE;\n\n    this.data = null;\n    this.width = 0;\n  }\n\n  static get observedAttributes() {\n    return ['username', 'logos', 'grid', 'max-items'];\n  }\n\n  get id() {\n    return this.getAttribute('id');\n  }\n\n  set id(value) {\n    this.setAttribute('id', value);\n  }\n\n  get username() {\n    return this.getAttribute('username');\n  }\n\n  set username(value) {\n    this.setAttribute('username', value);\n  }\n\n  get layout() {\n    const layout = this.getAttribute('layout');\n    if (layout === 'vertical') return 'vertical';\n    if (layout === 'horizontal') return 'horizontal';\n    if (this.width < this.minWidth) return 'vertical';\n    return 'horizontal';\n  }\n\n  set layout(value) {\n    this.setAttribute('layout', value);\n  }\n\n  get badges() {\n    const badges = this.getAttribute('badges');\n    if (badges !== null && badges !== '') return parseInt(badges, 10);\n    return 3;\n  }\n\n  set badges(value) {\n    this.setAttribute('badges', value);\n  }\n\n  get badgesData() {\n    const { data, badges, state } = this;\n    return formatBadges({ data, badges, loading: state === STATE_LOADING });\n  }\n\n  get badgesLayout() {\n    const { width, badgesData, layout, badgeMinWidth } = this;\n    const badgeWidth = (width - 16 - (badgesData.length - 1) * 8) / badgesData.length;\n    let badgesLayout = 'horizontal';\n    if (layout === 'horizontal' && badgeWidth < badgeMinWidth) {\n      badgesLayout = 'vertical';\n    } else if (layout === 'horizontal' && badgeWidth >= BADGE_WIDE_WIDTH) {\n      badgesLayout = 'horizontal-wide';\n    }\n    return badgesLayout;\n  }\n\n  get showAvatar() {\n    const showAvatar = this.getAttribute('show-avatar');\n    return showAvatar !== 'false';\n  }\n\n  set showAvatar(value) {\n    this.setAttribute('show-avatar', value);\n  }\n\n  set ['show-avatar'](value) {\n    this.setAttribute('show-avatar', value);\n  }\n\n  get showHeader() {\n    const showHeader = this.getAttribute('show-header');\n    return showHeader !== 'false';\n  }\n\n  set showHeader(value) {\n    this.setAttribute('show-header', value);\n  }\n\n  set ['show-head'](value) {\n    this.setAttribute('show-header', value);\n  }\n\n  get minWidth() {\n    let minWidth = parseInt(this.getAttribute('min-width'), 10);\n    if (!minWidth || Number.isNaN(minWidth)) minWidth = 300;\n    return minWidth;\n  }\n\n  set minWidth(value) {\n    this.setAttribute('min-width', value);\n  }\n\n  set ['min-width'](value) {\n    this.setAttribute('min-width', value);\n  }\n\n  get badgeMinWidth() {\n    let minWidth = parseInt(this.getAttribute('badge-min-width'), 10);\n    if (!minWidth || Number.isNaN(minWidth)) minWidth = 100;\n    return minWidth;\n  }\n\n  set badgeMinWidth(value) {\n    this.setAttribute('badge-min-width', value);\n  }\n\n  set ['badge-min-width'](value) {\n    this.setAttribute('badge-min-width', value);\n  }\n\n  get branding() {\n    return this.getAttribute('branding') !== 'false';\n  }\n\n  set branding(value) {\n    this.setAttribute('branding', value);\n  }\n\n  render() {\n    const {\n      username,\n      mounted,\n      state,\n      shadowEl,\n      data,\n      layout,\n      badgesData,\n      badgesLayout,\n      showAvatar,\n      showHeader,\n      branding,\n    } = this;\n    const ctx = {\n      username,\n      data: data || dummyProfile,\n      layout,\n      badgesData,\n      badgesLayout,\n      showAvatar,\n      showHeader,\n      branding,\n    };\n\n    if (!username || !mounted) return;\n    if (state === STATE_SUCCESS) {\n      this.tempDiv.innerHTML = render(ctx);\n    } else if (state === STATE_ERROR) {\n      this.tempDiv.innerHTML = renderError(ctx);\n    } else if (state === STATE_IDLE || state === STATE_LOADING) {\n      this.tempDiv.innerHTML = renderLoading(ctx);\n    }\n\n    let widgetEl = shadowEl.querySelector('.codersrank-summary');\n    let brandingEl = shadowEl.querySelector('.codersrank-summary-branding');\n    if (widgetEl) {\n      widgetEl.parentNode.removeChild(widgetEl);\n    }\n    if (brandingEl) {\n      brandingEl.parentNode.removeChild(brandingEl);\n    }\n    widgetEl = this.tempDiv.querySelector('.codersrank-summary');\n    brandingEl = this.tempDiv.querySelector('.codersrank-summary-branding');\n    if (!widgetEl) return;\n    this.widgetEl = widgetEl;\n    shadowEl.appendChild(widgetEl);\n    if (brandingEl) {\n      shadowEl.appendChild(brandingEl);\n    }\n  }\n\n  loadAndRender() {\n    const { username, id } = this;\n    this.state = STATE_LOADING;\n    this.render();\n    fetchData(username, id)\n      .then((data) => {\n        this.data = data;\n        this.state = STATE_SUCCESS;\n        this.render();\n      })\n      .catch(() => {\n        this.state = STATE_ERROR;\n        this.render();\n      });\n  }\n\n  onResize() {\n    if (!this.widgetEl) return;\n    this.width = this.offsetWidth;\n    const { layout, badgesLayout } = this;\n    if (layout === 'horizontal') {\n      this.widgetEl.classList.remove('codersrank-summary-vertical');\n    } else {\n      this.widgetEl.classList.remove('codersrank-summary-horizontal');\n    }\n    if (badgesLayout === 'horizontal') {\n      this.widgetEl.classList.remove('codersrank-summary-badges-vertical');\n    } else {\n      this.widgetEl.classList.remove('codersrank-summary-badges-horizontal');\n    }\n    this.widgetEl.classList.add(`codersrank-summary-${layout}`);\n    this.widgetEl.classList.add(`codersrank-summary-badges-${badgesLayout}`);\n  }\n\n  attributeChangedCallback() {\n    if (!this.mounted) return;\n    this.loadAndRender();\n  }\n\n  connectedCallback() {\n    window.addEventListener('resize', this.onResize);\n    this.width = this.offsetWidth;\n    this.mounted = true;\n    this.loadAndRender();\n  }\n\n  disconnectedCallback() {\n    window.removeEventListener('resize', this.onResize);\n    this.mounted = false;\n  }\n}\n\n// eslint-disable-next-line\nclass CodersrankWidget extends CodersrankSummary {}\n\n// EXPORT\n"],"names":["cache","fetchData","username","id","Promise","resolve","endpoint","badgesEndpoint","getUser","fetch","method","headers","then","res","json","getBadges","all","user","badges","data","err","console","error","reject","codersrRankLogo","round","num","Math","formatter","window","Intl","NumberFormat","minimumFractionDigits","format","formatScore","score","render","layout","badgesData","badgesLayout","showAvatar","showHeader","loading","branding","isNotRegistered","status","isPlaceholder","first_name","last_name","avatar_url","total_users","position","total_score","fullName","filter","l","join","percentage","min","max","ceil","tag","linkAttrs","badgeSeniorityLabel","label","split","map","char","index","toUpperCase","badgeStreakLabel","renderBadge","badge","version","rank","encodeURIComponent","language","location","badgeFamily","toLowerCase","badgeType","length","renderError","renderLoading","ctx","dummyProfile","country","visibility","location_name","formatBadges","profileData","maxBadges","result","values","slice","sort","a","b","filtered","STATE_IDLE","STATE_LOADING","STATE_ERROR","STATE_SUCCESS","BADGE_WIDE_WIDTH","STYLES","CodersrankSummary","shadowEl","attachShadow","mode","tempDiv","document","createElement","stylesEl","textContent","appendChild","onResize","bind","mounted","state","width","innerHTML","widgetEl","querySelector","brandingEl","parentNode","removeChild","loadAndRender","offsetWidth","classList","remove","add","attributeChangedCallback","connectedCallback","addEventListener","disconnectedCallback","removeEventListener","getAttribute","value","setAttribute","minWidth","parseInt","badgeMinWidth","badgeWidth","Number","isNaN","HTMLElement","CodersrankWidget"],"mappings":"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"}