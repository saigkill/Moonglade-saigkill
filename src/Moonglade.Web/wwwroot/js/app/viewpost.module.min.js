function resizeImages(){document.querySelectorAll(".post-content img").forEach(e=>{e.removeAttribute("height"),e.removeAttribute("width"),e.classList.add("img-fluid","img-thumbnail")})}function renderCodeHighlighter(){document.querySelectorAll("pre").forEach(e=>{if(!e.querySelector("code")){for(var t=document.createElement("code");e.firstChild;)t.appendChild(e.firstChild);e.appendChild(t)}e.classList.contains("language-markup")&&e.querySelector("code").classList.add("lang-xml")}),document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)})}function RenderLaTeX(){document.querySelectorAll("pre.language-latex code").forEach(e=>{var t=e.textContent.trim(),n=document.createElement("div");try{katex.render(t,n,{output:"mathml"}),e.parentNode.replaceWith(n)}catch(e){console.error(e)}})}function warnExtLink(){document.querySelectorAll(".post-content a").forEach(e=>{var t;(t=e).href.match(/^mailto:/)||t.hostname===location.hostname||e.classList.add("external")});let t=new bootstrap.Modal(document.getElementById("externalLinkModal"));document.querySelectorAll("a.external").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();e=this.getAttribute("href");document.getElementById("extlink-url").innerHTML=e,document.getElementById("extlink-continue").href=e,t.show()})}),document.getElementById("extlink-continue").addEventListener("click",function(){t.hide()})}function getImageWidthInDevicePixelRatio(e){var t;return e<=0?0:1===(t=window.devicePixelRatio)?e:e/t}function applyImageZooming(){document.querySelectorAll(".post-content img").forEach(function(n){n.addEventListener("click",function(e){var t=n.getAttribute("src");document.querySelector("#imgzoom").src=t,window.fitImageToDevicePixelRatio&&setTimeout(function(){var e=document.querySelector("#imgzoom").naturalWidth;document.querySelector("#imgzoom").style.width=getImageWidthInDevicePixelRatio(e)+"px"},100),new bootstrap.Modal(document.querySelector("#imgzoomModal")).show()})})}function resetCaptchaImage(){var e=new Date;document.querySelector("#img-captcha").src="/captcha-image?"+e.getTime()}var btnSubmitComment="#btn-submit-comment";function submitComment(e){document.querySelector("#thx-for-comment").style.display="none",document.querySelector("#thx-for-comment-non-review").style.display="none",document.querySelector("#loadingIndicator").style.display="block",document.querySelector(btnSubmitComment).classList.add("disabled"),document.querySelector(btnSubmitComment).setAttribute("disabled","disabled"),callApi("/api/comment/"+e,"POST",{username:document.querySelector("#input-comment-name").value,content:document.querySelector("#input-comment-content").value,email:document.querySelector("#input-comment-email").value,captchaCode:document.querySelector("#input-comment-captcha").value},e=>{document.querySelector("#comment-form").reset(),resetCaptchaImage();e=e.status;201===e&&(document.querySelector("#thx-for-comment").style.display="block"),200===e&&(document.querySelector("#thx-for-comment-non-review").style.display="block")},e=>{document.querySelector("#loadingIndicator").style.display="none",document.querySelector(btnSubmitComment).classList.remove("disabled"),document.querySelector(btnSubmitComment).removeAttribute("disabled")})}function calculateReadingTime(){var e=document.querySelector(".post-content").innerText,t=e.match(/\b\w+\b/g)||[],n=e.match(/[\u4e00-\u9fa5]/g)||[],e=e.match(/[\u3040-\u30FF\u31F0-\u31FF\uFF66-\uFF9F\u4E00-\u9FAF]/g)||[],t=t.length/225,n=n.length/450,e=e.length/400,t=Math.ceil(t+n+e);document.getElementById("reading-time").innerText=`Estimated Reading Time: ${t} minute(s)`}export{resizeImages,renderCodeHighlighter,RenderLaTeX,warnExtLink,getImageWidthInDevicePixelRatio,applyImageZooming,resetCaptchaImage,submitComment,calculateReadingTime};